(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-sessiondetails"],{"4da5":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("2f62"),i=c(a("e143")),s=c(a("6d8e"));function c(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach(function(e){u(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h=i.default.extend({data:function(){return{barconfig:{CustomBar:wx.STATUS_BAR_HEIGHT+wx.DEFAULT_HEADER_HEIGHT,StatusBar:wx.STATUS_BAR_HEIGHT,title:"比伯Jane",bgset:"bg-gradual-dred",tset:"bg-gradual-tred",hiddenTitle:1},youchat:{chattype:"p2p",account:"haoyou",avatar:"/static//images/iconH.jpg",uid:"-1",msg:""},blacklistbs:!1}},computed:r({},(0,n.mapGetters)({nim:"nim",userInfo:"userInfo",chatList:"chatList",thischatList:"thischatList",chatListaccount:"chatListaccount",chatListaccountsession:"chatListaccountsession"})),onUnload:function(){this.$refs.sessiondetails.clearIntervalfun()},onLoad:function(t){var e=this;console.log(t),this.barconfig.title=t.nick||"未知昵称",this.youchat={chattype:t.chattype||"p2p",account:t.account||"haoyou",avatar:t.avatar||"",uid:t.uid||"-1",msg:t.msg||""};var a=this.youchat.account;this.RefreshtheDialogue(a),this.youchat.uid&&parseInt(this.youchat.uid)>=0&&s.default.getOtherUser({member_id:this.youchat.uid}).then(function(t){1e4===t.code&&(e.blacklistbs=0!=t.data.relationship.bh)}),"notice"!=this.youchat.account&&"service"!=this.youchat.account?s.default.yxuserdata({yx_id_list:JSON.stringify([this.youchat.account])}).then(function(t){if(1e4==t.code){console.log("用户详情");for(var a={},n=0,i=t.data.other.length;n<i;n++)a[t.data.other[n].yxID]=t.data.other[n];e.youchat.avatar=a[e.youchat.account].header_url,e.barconfig.title=a[e.youchat.account].nickname}}):"notice"==this.youchat.account?(this.youchat.avatar="/static/images/systemicon.png",this.barconfig.title="系统通知"):(this.youchat.avatar="/static/images/serveicon.png",this.barconfig.title="客服")},methods:{RefreshtheDialogue:function(t){var e=this;wx.NIMFUN.getHistoryMsgs({scene:"p2p",to:t,limit:20,asc:!0,endTime:0,done:function(a,n){a?uni.showToast({title:"请检查网络后重试",icon:"none",duration:3e3}):(console.log("当前用户：",t,n.msgs),e.thischatList["p2p-".concat(t)]=n.msgs,console.log(e.thischatList["p2p-".concat(t)]),e.$store.dispatch("chatListaccountsession","p2p-".concat(t)),e.$store.dispatch("thischatList",e.thischatList))}})},blacklistos:function(){return!!wx.USER.blacklist[this.youchat.account]},pullgRelation:function(t){s.default.pullgRelatioasdasn(t.detail.data).then(function(e){t.detail.dons(e.code)})},sendmeg:function(t){var e=this;wx.NIMFUN.sendText({scene:t.detail.scene,to:t.detail.to,text:t.detail.text,done:function(a,n){var i=e.thischatList[e.chatListaccountsession];(!i||!Array.isArray(i)||i.length<=0)&&(i=[]),i.push(n),e.thischatList[e.chatListaccountsession]=i,e.$store.dispatch("thischatList",e.thischatList),t.detail.dons(n)}})}}});e.default=h},ae53:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return[a("v-uni-view",[a("sessiondetails",{ref:"sessiondetails",attrs:{chatmesage:t.thischatList[t.chatListaccountsession],barconfig:t.barconfig,blacklist:t.blacklistos(),blacklistbs:t.blacklistbs,youchat:t.youchat,userInfo:t.userInfo},on:{sendmeg:function(e){e=t.$handleEvent(e),t.sendmeg(e)},pullgRelation:function(e){e=t.$handleEvent(e),t.pullgRelation(e)}}})],1)]},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},c675:function(t,e,a){"use strict";a.r(e);var n=a("ae53"),i=a("e77c");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);var c=a("2877"),o=Object(c["a"])(i["default"],n["a"],n["b"],!1,null,"4ee22551",null);e["default"]=o.exports},e77c:function(t,e,a){"use strict";a.r(e);var n=a("4da5"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a}}]);