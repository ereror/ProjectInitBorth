(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{8069:function(t,e,a){"use strict";a.r(e);var i=a("9e17"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},8623:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'uni-page-body[data-v-b97c1e84]{\n\t\t/* background-image: linear-gradient(180deg, #f81f5e 0 28%, #f81f5e 28% 30%, #f9f9fb 28% 30%, #f9f9fb 30% 100%); */background-repeat:no-repeat;background-attachment:fixed}uni-page-body[data-v-b97c1e84]:before{content:" ";position:fixed;z-index:-1;height:%?320?%;width:100%;background:#f81f5e\n/*      background-image: linear-gradient(180deg, #f81f5e 0 28%, #f81f5e 28% 30%, #f9f9fb 28% 30%, #f9f9fb 30% 100%);\n\t  background-size: 100% 100%; */}.I-box[data-v-b97c1e84]{padding:%?95?% 0 %?60?% 0;margin-top:%?20?%}.I-box-bar[data-v-b97c1e84]{position:fixed;z-index:999;padding:0 %?24?%;height:%?98?%;width:100%;background:#f81f5e}.I-upload[data-v-b97c1e84]{position:fixed;z-index:1002;-webkit-transition:all .5s;-o-transition:all .5s;transition:all .5s;background:#f81f5e}.I-upload-complete[data-v-b97c1e84]{height:0;opacity:0;overflow:hidden}.I-upbar[data-v-b97c1e84]{width:%?750?%;height:%?8?%;padding:%?1?% 0;background:#fa5a38}.I-now[data-v-b97c1e84]{width:0;background:#ffb400;height:%?8?%;-webkit-transition:width .3s;-o-transition:width .3s;transition:width .3s}.I-uploadText[data-v-b97c1e84]{width:100%;text-align:center;margin:%?10?% 0;font-size:%?24?%;color:#fff}.I-adBox[data-v-b97c1e84]{\n\t\t/* width: 690rpx; */\n/* \t\theight: 260rpx; */margin:%?0?% auto;border-radius:%?30?%;padding-bottom:%?20?%\n\t\t/* background: #f2f2f2; */}.I-adBox-m-20[data-v-b97c1e84]{margin-top:%?40?%}.I-dot[data-v-b97c1e84]{padding:%?30?% 0}.I-dot-item[data-v-b97c1e84]{height:%?12?%;width:%?12?%;border-radius:%?6?%;background:#ffb400;margin-right:%?30?%}.I-dot-itema[data-v-b97c1e84]{width:%?30?%;background:#f81f5e}.I-barTool[data-v-b97c1e84]{min-width:%?160?%;height:%?60?%;background:#fff;border-radius:%?30?%}.I-barTool-text[data-v-b97c1e84]{margin:0 %?20?%;font-size:%?28?%;color:#f81f5e}.I-barTool-img[data-v-b97c1e84]{height:%?28?%;width:%?28?%}.I-barTool-img-02[data-v-b97c1e84]{margin-left:%?20?%;width:%?40?%;height:%?34?%}.I-content[data-v-b97c1e84]{padding:0 %?30?%}.I-item[data-v-b97c1e84]{margin-bottom:%?40?%;height:%?786?%;width:%?690?%;border-radius:%?30?%;background:#fff;overflow:hidden}.I-item-img[data-v-b97c1e84]{width:%?690?%;height:%?690?%;border-radius:%?30?%}.I-detail-box[data-v-b97c1e84]{position:relative}.I-detail[data-v-b97c1e84]{position:absolute;z-index:22;width:100%;padding:%?30?%;bottom:0;color:#fff}.I-textshadow[data-v-b97c1e84]{text-shadow:%?1?% %?1?% %?2?% rgba(0,0,0,.2),%?-1?% %?1?% %?2?% rgba(0,0,0,.2),%?1?% %?-1?% %?2?% rgba(0,0,0,.2),%?-1?% %?-1?% %?2?% rgba(0,0,0,.2)}.I-d-name[data-v-b97c1e84]{font-size:%?34?%;color:#fff}.I-d-mark[data-v-b97c1e84]{margin:0 %?10?%;font-size:%?26?%;font-weight:600}.I-d-text[data-v-b97c1e84]{font-size:%?24?%}.I-d-icons[data-v-b97c1e84]{margin-top:%?20?%;font-size:%?26?%;line-height:%?36?%;color:#fff;text-shadow:%?1?% %?1?% %?2?% #000}.I-d-addr[data-v-b97c1e84]{margin-left:%?20?%}.I-d-distance[data-v-b97c1e84]{margin-left:%?20?%}.I-d-msgIcon[data-v-b97c1e84]{margin-left:%?10?%;width:%?30?%;height:%?30?%;border-radius:%?30?%;background:#fff}.I-d-msgIcon2[data-v-b97c1e84]{margin-left:%?10?%;min-width:%?100?%;min-height:%?50?%;border-radius:%?25?%;background:#fff;padding:%?6?% %?14?%;-webkit-box-shadow:%?1?% %?1?% %?1?% rgba(0,0,0,.2);box-shadow:%?1?% %?1?% %?1?% rgba(0,0,0,.2)}.I-d-msgIcon2-text[data-v-b97c1e84]{margin-left:.3em;color:#000}.I-d-msgIcon-img[data-v-b97c1e84]{width:%?30?%;height:%?30?%;border-radius:%?30?%}.I-d-rz[data-v-b97c1e84]{position:absolute;top:0;right:0;z-index:23;width:%?162?%;height:%?60?%;line-height:%?60?%;background:#09d6a1;border-radius:0 %?30?% 0 %?30?%;-webkit-box-shadow:%?-2?% %?-2?% 0 %?2?% #93e5d0;box-shadow:%?-2?% %?-2?% 0 %?2?% #93e5d0;font-size:%?28?%;text-align:center;color:#fff}.I-text-box[data-v-b97c1e84]{height:%?96?%;background:#fff}.I-text[data-v-b97c1e84]{font-size:%?26?%;line-height:%?36?%;color:#000;font-weight:500}.I-text-mark[data-v-b97c1e84]{font-size:%?24?%;color:#f81f5e;margin:0 %?20?% 0 %?30?%}.I-btn[data-v-b97c1e84]{-webkit-box-flex:1;-webkit-flex:auto;-ms-flex:auto;flex:auto}.upload-fail[data-v-b97c1e84]{background:#333}body.?%PAGE?%[data-v-b97c1e84]{background-repeat:no-repeat;background-attachment:fixed;background:#f81f5e}',""])},"9e17":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(a("e143")),n=l(a("8212")),o=l(a("82f8")),s=l(a("6d8e")),r=l(a("88d3")),d=a("2f62");function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return f(t)||g(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(a,!0).forEach(function(e){b(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var v=getApp(),m=i.default.extend({data:function(){return{title:"Hello",STATUS_BAR_HEIGHT:wx.STATUS_BAR_HEIGHT,DEFAULT_HEADER_HEIGHT:wx.DEFAULT_HEADER_HEIGHT,barconfig:{CustomBar:wx.STATUS_BAR_HEIGHT+wx.DEFAULT_HEADER_HEIGHT,StatusBar:wx.STATUS_BAR_HEIGHT,title:"51约",bgset:"bg-gradual-dred",tset:"bg-gradual-tred"},swiperConf:{interval:5e3,duration:500,autoplay:!0,circular:!0,mode:"aspectFill",model:1},vsxIcons:"../../static/images/index-icon-sx.png",vshareIcons:"../../static/images/index-icon-share.png",vsxIcon:"../../static/images/sx.png",Iitemimg:"https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_boy.png",Iitemimgw:"https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_girl.png",vHot:"https://sns-cdn.myxianxiaobao.com/sfximao/v-hot.png",type:"",width:0,upload:"",param:{gender:0,sort:1,video:0,page:1,pagesize:10,last_page:1,total:0,current_page:0},initparam:{},loading:!1,loadConf:{loading:!1,current_page:1,last_page:1,len:-1},vipIcon:[],userList:[],bannerList:[],selfTypesObj:{},isTopBar:!1,keyNow:0,vipItem:{},uploadResult:"",fromType:"",locationInfo:{latitude:"",longitude:""},shareFrom:{id:"",type:""}}},computed:p({},(0,d.mapGetters)({tbarconfig:"tbarconfig"})),onLoad:function(t){t.height,t.width;var e=t.tempFilePath,a=t.type,i=t.otherId,n=t.fromType,o=t.id,s=t.shareType,r=t.gotoDesn;if(r)uni.navigateTo({url:"/pages/regist/stepvideo"});else{this.initparam=Object.assign({},this.param),this.otherId=i||v.globalData.otherId,this.fromType=n;o&&s&&(this.shareFrom=v.globalData.shareFrom={id:o,type:s}),"upload"===a&&e&&(this.type="upload",this.uploadUrl=e,this.uploadFile(e)),!i||v.globalData.isNotRegist||n||this.goSmfunc(i)}},onShow:function(){var t=this;this.userInfo=v.globalData.userInfo,this.vipIcon=v.globalData.vipIcon||[],this.locationInfo=v.globalData.locationInfo;var e=this.otherId||v.globalData.otherId,a=n.default.isEmpty(this.userInfo);v.globalData.isNotRegist?uni.reLaunch({url:"/pages/index/begin?type=regist"}):(this.shareFrom.id&&this.shareFrom.type&&v.$vm.sendShareMessAge(),!e||v.globalData.isNotRegist||this.fromType?a?v.$vm.getUserInfo(!0).then(function(e){t.userInfo=e,t.init()}):this.init():this.goSmfunc(e))},onPullDownRefresh:function(){this.param.current_page=0,this.param.page=1,this.userList=[],this.loading=!1,this.getMermbers(),this.getBannerList()},onReachBottom:function(){var t=this.loading,e=this.param,a=e.current_page,i=e.last_page;e.page;t||a==i||(this.param.page=a+1,this.loadConf.loading=!0,this.getMermbers())},onShareAppMessage:function(){var t=v.globalData.userInfo&&v.globalData.userInfo.memberID;return{title:"我在51约约到了小哥哥，小姐姐一起看电影，唱歌，吃饭...",path:"/pages/index/begin?type=desct&shareType=user&id="+t,imageUrl:"https://sns-cdn.myxianxiaobao.com/sfximao/51sharebg.png",success:function(t){}}},methods:{init:function(){var t=this;this.selfTypes=v.globalData.selfTypes||r.default.getItem("selfTypes");var e=v.globalData.isBrush,a=r.default.getItem("queryParam");a.length?(a=JSON.parse(a),a.age_min=a.ageVal[0]||18,a.age_max=a.ageVal[1]||70,a.height_min=a.heightVal[0]||150,a.height_max=a.heightVal[1]||220,a.recent=Number(a.recentR),a.objective=a.objective+"",(v.globalData.searchIndexResult||e)&&Object.assign(this.param,a)):this.param.gender=1===this.userInfo.gender?2:1;var i=v.globalData.vipItem;i&&i.length?this.initVip(i):v.$vm.getPlayList().then(function(e){t.initVip(e)}),this.selfTypes.map(function(e){t.selfTypesObj[e.id]=e.text}),this.getBannerList(),this.getMermbers()},goSmfunc:function(t){var e="",a=0,i=this.userInfo,n=i.height,o=i.birthday,s=i.objective,r=(i.occupation,i.revenue),d=i.gender,l=i.status,c=i.memberID;if(n&&o?s&&r?1===d&&0===l?e="/pages/message/join?from=index":a=1:e="/pages/regist/stepinfo":e="/pages/regist/stepuser",a){v.globalData.otherId="",this.otherId="";var u="/pages/userinfo/othersd?id=".concat(t);c&&t&&c===1*t&&(u="/pages/userinfo/detail"),uni.navigateTo({url:u})}else uni.reLaunch({url:e})},initVip:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.map(function(e){t.vipItem[e.id]=e.title.substr(0,2)})},getBannerList:function(){var t=this;s.default.getBannerList().then(function(e){1e4===e.code&&(t.bannerList=e.data||[],t.bannerList.map(function(t){t.src=t.picture_url}),v.globalData.bannerList=t.bannerList)})},goDetail:function(t){var e=t.currentTarget.dataset.id;uni.navigateTo({url:"/pages/userinfo/othersd?id=".concat(e)})},getMermbers:function(){var t,e=this,a=v.globalData.isBrush;if(v.globalData.searchIndexResult||a){var i=this.param,o=i.gender,r=i.sort,d=i.video,l=i.page,u=i.current_page,g=i.pagesize,f=i.age_min,h=i.age_max,p=i.height_min,b=i.height_max,m=i.revenue,I=i.occupation,w=i.recent,x=i.objective;t={gender:o,sort:r,video:d,page:l,current_page:u,pagesize:g,age_min:f,age_max:h,height_min:p,height_max:b,revenue:m,occupation:I,recent:w,objective:x},t.objective=t.objective||0}else t=this.param;this.loading||(a&&(t.page=1,t.current_page=0,this.userList=[]),t.page!==t.current_page&&(this.loading=!0,s.default.getUserList(t).then(function(t){if(e.loading=!1,e.loadConf.loading=!1,1e4===t.code){var i=t.data,o=i.last_page,s=i.current_page,r=i.total,d=i.data;if(!d.length&&a)return v.globalData.searchIndexResult=!1,v.globalData.isBrush=!1,n.default.showFail("没有符合条件的用户，以后是系统为你推荐的用户",1e3),e.param=Object.assign({},e.initparam),void e.getMermbers();a&&d.length&&(v.globalData.isBrush=!1,v.globalData.searchIndexResult=!0),d.map(function(t){t.distance=n.default.distance(e.locationInfo.latitude,e.locationInfo.longitude,t.latitude,t.longitude)}),e.loadConf.last_page=e.param.last_page=o,e.loadConf.current_page=e.param.current_page=s,e.loadConf.len=d.length||-1,e.param.total=r,e.userList=[].concat(c(e.userList),c(d))}else n.default.showFail("数据获取失败")}).catch(function(t){e.loading=!1,e.loadConf.loading=!1})))},swiperchange:function(t){var e=t.detail.key;this.keyNow=e},goUrl:n.default.throttle(function(t){n.default.goUrl(t)}),checkResult:function(){"fail"===this.upload&&(this.type="upload",this.upload="",this.uploadFile(this.uploadUrl))},uploadFile:function(t){var e=this,a=this;this.upload="";var i=o.default.uploadFileProgress({filePath:t,formData:{uploadtype:"file"},success:function(t){var e=t.data;a.upload="success",a.saveUser(e.url),setTimeout(function(){a.uploadResult="complete"},1e3)},fail:function(t){a.width=100,a.upload="fail"},complete:function(){}});i.onProgressUpdate(function(t){e.width=t.progress})},saveUser:function(t){var e={id:this.userInfo.memberID,video_url:t};s.default.saveData(e).then(function(t){1e4===t.code&&uni.$emit("getUserInfo",{msg:"更新用户信息"})})}}});e.default=m},ac07:function(t,e,a){var i=a("8623");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("053ae6c6",i,!0,{sourceMap:!1,shadowMode:!1})},c473:function(t,e,a){"use strict";var i=a("ac07"),n=a.n(i);n.a},d32c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return[a("custombar",{attrs:{name:"uni-app",barconfig:t.barconfig}}),a("v-uni-view",{staticClass:"I-box-bar flex-v-b",style:{top:t.barconfig.CustomBar+"px"}},[a("v-uni-view",{staticClass:"I-barTool flex-x-l",attrs:{"data-url":"/pages/tool/brush"},on:{click:function(e){e=t.$handleEvent(e),t.goUrl(e)}}},[a("v-uni-view",{staticClass:"I-barTool-text"},[t._v("筛选")]),a("v-uni-image",{staticClass:"I-barTool-img",attrs:{src:t.vsxIcons}})],1),a("v-uni-button",{staticClass:"buttonreset I-barTool flex-x-l",attrs:{"open-type":"share"}},[a("v-uni-image",{staticClass:"I-barTool-img-02",attrs:{src:t.vshareIcons}}),a("v-uni-view",{staticClass:"I-barTool-text"},[t._v("分享给朋友")])],1)],1),a("v-uni-view",{staticClass:"I-box"},["upload"===t.type?a("v-uni-view",{class:["I-upload","complete"===t.uploadResult?"I-upload-complete":""],style:{top:t.barconfig.CustomBar+10+29+"px"}},[a("v-uni-view",{staticClass:"I-upbar"},[a("v-uni-view",{class:["I-now","fail"===t.upload?"upload-fail":""],style:{width:t.width+"%"}})],1),a("v-uni-view",{staticClass:"I-uploadText",on:{click:function(e){e=t.$handleEvent(e),t.checkResult(e)}}},[t._v(t._s(t.upload?"fail"===t.upload?"视频上传失败，点击重试":"视频上传成功,审核后显示！":"视频上传中"))])],1):t._e(),t.bannerList.length?a("v-uni-view",{class:["I-adBox","upload"===t.type?"I-adBox-m-20":""]},[t.bannerList.length?a("uswiper",{attrs:{items:t.bannerList,swiperConfig:t.swiperConf},on:{swiperchange:function(e){e=t.$handleEvent(e),t.swiperchange(e)}}}):t._e()],1):t._e(),t._l(t.userList,function(e,i){return a("v-uni-view",{key:i,staticClass:"I-content",attrs:{"data-id":e.memberID},on:{click:function(e){e=t.$handleEvent(e),t.goDetail(e)}}},[a("v-uni-view",{staticClass:"I-item"},[a("v-uni-view",{staticClass:"I-detail-box"},[a("v-uni-image",{staticClass:"I-item-img",attrs:{src:e.header_url?e.header_url:1===e.gender?t.Iitemimg:t.Iitemimgw,mode:"aspectFill"}}),a("v-uni-view",{staticClass:"I-detail"},[a("v-uni-view",{staticClass:"I-d-msg flex-x-l"},[a("v-uni-view",{staticClass:"I-d-name I-textshadow"},[t._v(t._s(e.nickname?e.nickname:1===e.gender?"小哥哥XDGF9878":"小姐姐XDGF9878"))]),a("v-uni-view",{staticClass:"I-d-mark I-textshadow"},[t._v("/")]),a("v-uni-view",{staticClass:"I-d-text I-textshadow"},[t._v(t._s(e.age||"28"))]),a("v-uni-view",{staticClass:"I-d-mark I-textshadow"},[t._v("/")]),a("v-uni-view",{staticClass:"I-d-text I-textshadow"},[t._v(t._s(e.constellation||"双子座"))])],1),a("v-uni-view",{staticClass:"I-d-icons flex-x-l"},[a("v-uni-view",{staticClass:"I-d-time I-textshadow"},[t._v(t._s(e.login_time||"1天前"))]),e.location.length?a("v-uni-view",{staticClass:"I-d-addr I-textshadow"},[t._v(t._s(e.location||"四川成都 天府广场"))]):t._e(),e.distance>.5?a("v-uni-view",{staticClass:"I-d-distance I-textshadow"},[t._v(t._s(e.distance)+"km")]):t._e(),e.distance<.5&&1*e.distance>.001?a("v-uni-view",{staticClass:"I-d-distance I-textshadow"},[t._v(t._s(1e3*e.distance)+"m")]):t._e(),1*e.distance<.001?a("v-uni-view",{staticClass:"I-d-distance I-textshadow"},[t._v("10m内")]):t._e(),e.heart?a("v-uni-view",{staticClass:"I-d-msgIcon"},[a("v-uni-image",{staticClass:"I-d-msgIcon-img",attrs:{src:t.vHot}})],1):t._e(),e.vip_id?a("v-uni-view",{staticClass:"I-d-msgIcon2 flex-c"},[a("v-uni-image",{staticClass:"I-d-msgIcon-img",attrs:{src:t.vipIcon[e.vip_id-1],mode:"aspectFill"}}),a("v-uni-view",{staticClass:"I-d-msgIcon2-text"},[t._v(t._s(t.vipItem[e.vip_id]||"普通"))])],1):t._e()],1)],1),e.video_url?a("v-uni-view",{staticClass:"I-d-rz"},[t._v("视频已认证")]):t._e()],1),a("v-uni-view",{staticClass:"I-text-box flex-b"},[a("v-uni-view",{staticClass:"I-text flex-x-l"},[a("v-uni-view",{staticClass:"I-text-mark"},[t._v("●")]),a("v-uni-view",{staticClass:"I-text-detail"},[t._v("希望一起"+t._s(t.selfTypesObj[e.objective]||"吃饭"))])],1),a("v-uni-view",{staticClass:"I-btn"})],1)],1)],1)}),t.loading?a("loading",{attrs:{loadConf:t.loadConf}}):t._e()],2),a("tbar",{attrs:{isActiveIndex:"0",tbarconfig:t.tbarconfig}})]},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},f75a:function(t,e,a){"use strict";a.r(e);var i=a("d32c"),n=a("8069");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("c473");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"b97c1e84",null);e["default"]=r.exports}}]);