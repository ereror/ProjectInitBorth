(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tool-adviceback"],{"2b8a":function(t,a,e){a=t.exports=e("2350")(!1),a.push([t.i,"uni-page-body[data-v-dbfb8cba]{background:#f9f9fb}.ad-box[data-v-dbfb8cba]{padding:%?40?% %?30?%}.ad-box-bar[data-v-dbfb8cba]{width:100%;height:%?52?%;font-size:%?30?%;color:#333}.ad-box-bar-btn[data-v-dbfb8cba]{color:#f82764}.ad-btn[data-v-dbfb8cba]{margin-top:%?60?%;width:%?690?%;height:%?88?%;border-radius:%?30?%}.ad-ipt-box[data-v-dbfb8cba]{margin-top:%?40?%;width:%?690?%;min-height:%?300?%;border-radius:%?30?%;background:#f2f2f2;padding:%?30?%}.ad-ipt[data-v-dbfb8cba]{width:100%;font-size:%?26?%;min-height:%?280?%}.ad-plcolor[data-v-dbfb8cba]{color:#999}.ad-ipt-count[data-v-dbfb8cba]{text-align:right;font-size:%?26?%;color:#999}.ad-upimg[data-v-dbfb8cba]{margin:%?80?% 0 %?30?% 0;padding:%?40?% 0}.ad-upimg-title[data-v-dbfb8cba]{height:%?42?%;line-height:%?42?%;font-size:%?30?%;color:#333}.ad-upimgbox[data-v-dbfb8cba]{margin-top:%?40?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-left:%?-40?%}.ad-upimg-btn[data-v-dbfb8cba],.ad-upimg-item[data-v-dbfb8cba]{position:relative;width:%?170?%;height:%?170?%;margin-left:%?40?%;border-radius:%?30?%;background:#f2f2f2}.ad-upimg-img[data-v-dbfb8cba]{border-radius:%?30?%}.ad-upimg-btn-icon[data-v-dbfb8cba]{width:%?49?%;height:%?35?%}.ad-upimg-close[data-v-dbfb8cba]{position:absolute;z-index:477;width:%?40?%;height:%?40?%;border-radius:50%;top:%?-15?%;right:%?-15?%;background:#f82764;font-size:%?22?%}.ad-upmess[data-v-dbfb8cba]{font-size:%?22?%;line-height:1.5;color:#333}.closebtn[data-v-dbfb8cba]{color:#fff}body.?%PAGE?%[data-v-dbfb8cba]{background:#f9f9fb}",""])},ab20:function(t,a,e){"use strict";e.r(a);var i=e("f5ee"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,function(){return i[t]})}(o);a["default"]=n.a},c544:function(t,a,e){"use strict";var i=e("ec1c"),n=e.n(i);n.a},e59c:function(t,a,e){"use strict";e.r(a);var i=e("ef59"),n=e("ab20");for(var o in n)"default"!==o&&function(t){e.d(a,t,function(){return n[t]})}(o);e("c544");var s=e("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"dbfb8cba",null);a["default"]=c.exports},ec1c:function(t,a,e){var i=e("2b8a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("2cb6dc50",i,!0,{sourceMap:!1,shadowMode:!1})},ef59:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return[e("custombar",{attrs:{name:"uni-app",barconfig:t.barconfig}}),t.showChoosebox?e("dialogbox",{attrs:{items:t.items,boxconfig:t.boxconfig,choseKey:t.choseKey},on:{surefunc:function(a){a=t.$handleEvent(a),t.surefunc(a)},cancelfunc:function(a){a=t.$handleEvent(a),t.cancelfunc(a)}}}):t._e(),e("v-uni-view",{staticClass:"ad-box"},[e("v-uni-view",{staticClass:"ad-box-bar flex-b"},[e("v-uni-view",[t._v("举报类型")]),e("v-uni-view",{staticClass:"ad-box-bar-btn flex-c",on:{click:function(a){a=t.$handleEvent(a),t.showChooseboxFunc(a)}}},[e("v-uni-view",[t._v(t._s(t.items[t.choseKey].text))]),e("v-uni-text",{staticClass:"iconfont icon-right ad-box-bar-btn"})],1)],1),e("v-uni-view",{staticClass:"ad-ipt-box"},[e("v-uni-textarea",{staticClass:"ad-ipt",attrs:{"placeholder-class":"ad-plcolor",value:t.adValue,placeholder:"请写下你的意见或遇到的问题",maxlength:"50","auto-height":"","cursor-spacing":"300"},on:{input:function(a){a=t.$handleEvent(a),t.setAdvalue(a)}}}),e("v-uni-view",{staticClass:"ad-ipt-count"},[t._v(t._s(t.adValue.length)+"/50")])],1),e("v-uni-view",{staticClass:"ad-upimg"},[e("v-uni-view",{staticClass:"ad-upimg-title"},[t._v("添加图片("+t._s(t.imageList.length)+"/3)")]),e("v-uni-view",{staticClass:"ad-upimgbox"},[t.imageList.length<3?e("v-uni-view",{staticClass:"ad-upimg-btn flex-c",on:{click:function(a){a=t.$handleEvent(a),t.chooseImg(a)}}},[e("v-uni-image",{staticClass:"ad-upimg-btn-icon",attrs:{src:t.addImg,mode:"widthFix"}})],1):t._e(),t._l(t.imageList,function(a,i){return e("v-uni-view",{key:i,staticClass:"ad-upimg-item flex-c"},[e("v-uni-image",{staticClass:"ad-upimg-img",attrs:{mode:"aspectFill",src:a.path}}),e("v-uni-view",{staticClass:"ad-upimg-close flex-c",attrs:{"data-index":i},on:{click:function(a){a=t.$handleEvent(a),t.delImg(a)}}},[e("v-uni-text",{staticClass:"iconfont icon-baseline-close-px closebtn"})],1)],1)})],2)],1),e("v-uni-view",{staticClass:"ad-upmess"},[t._v("反馈问题意见时，请留下您的手机号等联系方式，")]),e("v-uni-view",{staticClass:"ad-upmess"},[t._v("非常感谢！如有需要，您可以添加截图照片给我们。")]),e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(a){a=t.$handleEvent(a),t.createFormId(a)}}},[e("v-uni-button",{staticClass:"c-btn bg-red2 ad-btn",attrs:{"form-type":"submit"},on:{click:function(a){a=t.$handleEvent(a),t.saveAdvice(a)}}},[t._v("提交")])],1)],1)]},n=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return n})},f5ee:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=d(e("e143")),n=d(e("db49")),o=d(e("82f8")),s=d(e("6d8e")),c=d(e("8212"));function d(t){return t&&t.__esModule?t:{default:t}}function u(t){return f(t)||r(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var b=getApp(),h=i.default.extend({data:function(){return{title:"Hello",STATUS_BAR_HEIGHT:wx.STATUS_BAR_HEIGHT,DEFAULT_HEADER_HEIGHT:wx.DEFAULT_HEADER_HEIGHT,barconfig:{CustomBar:wx.STATUS_BAR_HEIGHT+wx.DEFAULT_HEADER_HEIGHT,StatusBar:wx.STATUS_BAR_HEIGHT,title:"匿名举报",bgset:"bg-gradual-default",tset:"bg-gradual-rblack",hiddenTitle:2,isArrow:1},addImg:"../../static/images/d-tool-photo.png",showChoosebox:!1,boxconfig:{key:0,model:2,btn:{ok:"确定",okcolor:"d-color-r",cancel:"取消",cancolor:"d-color-b"}},imageList:[],items:[],choseKey:5,adValue:"",id:""}},onLoad:function(t){this.id=t.uid},onShow:function(){this.items=Object.assign(n.default.selfadvice)},methods:{delImg:function(t){var a=c.default.getData(t),e=a.index;this.imageList.splice(e,1)},chooseImg:function(){var t=this;wx.chooseImage({count:3,sourceType:["album","camera"],success:function(a){for(var e=a.tempFiles,i=[],n=function(t){d=new Promise(function(a,i){o.default.upload({filePath:e[t].path}).then(function(e){console.log(e.id),e.id?a(e):i(t+1)})}),i.push(d)},s=0;s<e.length;s++){var d;n(s)}c.default.showLoading("上传中"),Promise.all(i).then(function(a){c.default.showSuccess("上传成功");for(var i=0,n=a.length;i<n;i++){var o=a[i];e[i].id=o.id,e[i].path=o.url}t.imageList=[].concat(u(t.imageList),u(e)),c.default.hideAll()}).catch(function(t){if(console.log(t),1==e.length)c.default.showFail("图片上传失败");else{var a=t.join(",");c.default.showFail("warn 第"+a+"张图片上传失败",1e3)}c.default.hideAll()})}})},showChooseboxFunc:function(){this.showChoosebox=!0},surefunc:function(t){var a=t.detail,e=a.choseIndex;a.val;this.choseKey=1*e,this.showChoosebox=!1},cancelfunc:function(){this.showChoosebox=!1},setAdvalue:function(t){this.adValue=t.detail.value},saveAdvice:function(t){var a={complaint_id:this.id,content:this.adValue,type:this.items[this.choseKey].text,picture:JSON.stringify(this.imageList)};return this.id?this.adValue?(c.default.showLoading("数据保存中..."),void s.default.addAccusation(a).then(function(t){c.default.hideAll(),1e4===t.code?(c.default.showSuccess("数据保存成功！"),uni.navigateBack()):c.default.showSuccess("数据保存失败！")}).catch(function(t){c.default.hideAll()})):c.default.showFail("当前举报内容不能为空"):c.default.showFail("当前用户id不能为空")},createFormId:function(t){t.detail.formId&&b.$vm.sendFormId(t.detail.formId)}}});a.default=h}}]);