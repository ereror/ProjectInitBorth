(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-index"],{"108a":function(t,e,s){"use strict";s.r(e);var i=s("1235"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);e["default"]=a.a},1235:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(s("6d8e")),a=s("2f62"),n=c(s("e143"));function c(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(s,!0).forEach(function(e){u(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l=n.default.extend({data:function(){return{title:"Hello",STATUS_BAR_HEIGHT:wx.STATUS_BAR_HEIGHT,DEFAULT_HEADER_HEIGHT:wx.DEFAULT_HEADER_HEIGHT,barconfig:{CustomBar:wx.STATUS_BAR_HEIGHT+wx.DEFAULT_HEADER_HEIGHT,StatusBar:wx.STATUS_BAR_HEIGHT,title:"消息",bgset:"bg-gradual-dred",tset:"bg-gradual-tred"},nim:null,Iitemimg:"",Iitemimgw:"https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_girl.png"}},computed:r({},(0,a.mapGetters)({userInfo:"userInfo",chatList:"chatList",thischatList:"thischatList",chatListaccount:"chatListaccount",chatListaccountsession:"chatListaccountsession",unreadInfo:"unreadInfo",tbarconfig:"tbarconfig",chatListuserdata:"chatListuserdata"})),watch:{chatList:function(t){this.uodateuser()}},onLoad:function(){this.uodateuser()},onShow:function(){this.$store.dispatch("chatListaccount",""),this.$store.dispatch("chatListaccountsession","")},methods:{godetailsme:function(t){this.$store.dispatch("chatListaccount",t.account),this.$store.dispatch("chatListaccountsession",t.session),wx.NIMFUN.resetSessionUnread(t.session),wx.navigateTo({url:"/pages/message/sessiondetails?chattype=".concat("p2p","&account=",t.account,"&avatar=").concat(this.chatListuserdata[t.account]&&this.chatListuserdata[t.account].header_url||"","&nick=").concat(this.chatListuserdata[t.account]&&this.chatListuserdata[t.account].nickname||"","&session=").concat(t.session,"&uid=").concat(this.chatListuserdata[t.account]&&this.chatListuserdata[t.account].id||"-1","&msg=")})},uodateuser:function(){for(var t=this,e=[],s=this.chatList,a=0,n=s.length;a<n;a++)e.push(s[a].account);i.default.yxuserdata({yx_id_list:JSON.stringify(e)}).then(function(e){if(1e4==e.code)for(var s=e.data.other||[],i=0,a=s.length;i<a;i++)t.$set(t.chatListuserdata,s[i].yxID,s[i]);t.$set(t.chatListuserdata,"notice",{id:"-1",header_url:"/static/images/systemicon.png",nickname:"系统通知",yxID:"notice"}),t.$set(t.chatListuserdata,"service",{id:"-2",header_url:"/static/images/serveicon.png",nickname:"客服",yxID:"service"}),t.$store.dispatch("chatListuserdata",t.chatListuserdata)})}}});e.default=l},b56f:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return[s("custombar",{attrs:{name:"uni-app",barconfig:t.barconfig}}),s("v-uni-view",{staticClass:"messagepage"},t._l(t.chatList,function(e,i){return s("v-uni-view",{key:i},[s("v-uni-view",{staticClass:"sessionlist",on:{click:function(s){s=t.$handleEvent(s),t.godetailsme(e)}}},[s("v-uni-view",{staticClass:"sessionlist_header"},[s("v-uni-view",{staticClass:"sessionlist_icon"},[s("v-uni-image",{attrs:{src:t.chatListuserdata[e.account]&&t.chatListuserdata[e.account].header_url||t.Iitemimg}})],1),t.unreadInfo[e.session]&&t.unreadInfo[e.session]>0?s("v-uni-view",{staticClass:"sessionlist_number"},[s("v-uni-view",[t._v(t._s(t.unreadInfo[e.session]>9?"9+":t.unreadInfo[e.session]))])],1):t._e()],1),s("v-uni-view",{staticClass:"sessionlist_text"},[s("v-uni-view",{staticClass:"sessionlist_text_name"},[s("v-uni-view",{staticClass:"sessionlist_text_name1"},[t._v(t._s(t.chatListuserdata[e.account]&&t.chatListuserdata[e.account].nickname||""))]),s("v-uni-view",{staticClass:"sessionlist_text_name2"},[t._v(t._s(e.displayTime))])],1),s("v-uni-view",{staticClass:"sessionlist_text_content",class:t.unreadInfo[e.session]>0?"sessionlist_text_content_new":""},[t._v(t._s(e.lastestMsg))])],1)],1)],1)}),1),s("tbar",{attrs:{isActiveIndex:1,tbarconfig:t.tbarconfig}})]},a=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a})},d662:function(t,e,s){e=t.exports=s("2350")(!1),e.push([t.i,".messagepage[data-v-4bc9c440]{width:100%;padding-bottom:%?100?%;overflow:hidden}\n\n/* 会话列表 */.sessionlist[data-v-4bc9c440]{width:%?690?%;height:%?188?%;margin:0 auto;padding-top:%?40?%;\n    /* background-color: #ccc; */display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.sessionlist_header[data-v-4bc9c440]{width:%?120?%;height:%?120?%;\n    /* background-color: yellow; */position:relative}.sessionlist_icon[data-v-4bc9c440]{width:%?120?%;height:%?120?%;border-radius:50%;overflow:hidden;background-color:#f2f2f2}.sessionlist_icon>uni-image[data-v-4bc9c440]{width:%?120?%;height:%?120?%}.sessionlist_number[data-v-4bc9c440]{position:absolute;bottom:0;right:0;width:%?38?%;height:%?38?%;background-color:#fff;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.sessionlist_number>uni-view[data-v-4bc9c440]{width:%?36?%;height:%?36?%;border-radius:50%;background-color:#6267f9;font-size:%?24?%;color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.sessionlist_text[data-v-4bc9c440]{margin-right:%?4?%;width:%?526?%;height:%?146?%;\n    /* background-color: rgb(221, 207, 207); */border-bottom:%?2?% solid #efefef}.sessionlist_text_name[data-v-4bc9c440]{padding-top:%?12?%;padding-bottom:%?10?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.sessionlist_text_content[data-v-4bc9c440],.sessionlist_text_name>uni-view[data-v-4bc9c440]{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal}.sessionlist_text_name1[data-v-4bc9c440]{width:%?260?%;font-size:%?34?%;color:#000;font-weight:700}.sessionlist_text_name2[data-v-4bc9c440]{width:%?266?%;color:#999;font-size:%?30?%;text-align:right}.sessionlist_text_content[data-v-4bc9c440]{font-size:%?30?%;font-weight:400;color:#666;line-height:%?44?%}.sessionlist_text_content_new[data-v-4bc9c440]{color:#f81f5e}",""])},e802:function(t,e,s){var i=s("d662");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=s("4f06").default;a("bab8a498",i,!0,{sourceMap:!1,shadowMode:!1})},e83e:function(t,e,s){"use strict";s.r(e);var i=s("b56f"),a=s("108a");for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);s("fac1");var c=s("2877"),o=Object(c["a"])(a["default"],i["a"],i["b"],!1,null,"4bc9c440",null);e["default"]=o.exports},fac1:function(t,e,s){"use strict";var i=s("e802"),a=s.n(i);a.a}}]);