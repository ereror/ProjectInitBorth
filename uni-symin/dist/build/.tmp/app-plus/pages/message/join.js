(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/join"],{3962:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=c(t("66fd")),o=c(t("8212")),i=c(t("6d8e"));function c(e){return e&&e.__esModule?e:{default:e}}var s=getApp(),u=a.default.extend({data:function(){return{title:"Hello",STATUS_BAR_HEIGHT:wx.STATUS_BAR_HEIGHT,DEFAULT_HEADER_HEIGHT:wx.DEFAULT_HEADER_HEIGHT,barconfig:{CustomBar:wx.STATUS_BAR_HEIGHT+wx.DEFAULT_HEADER_HEIGHT,StatusBar:wx.STATUS_BAR_HEIGHT,title:"立即加入",bgset:"bg-gradual-sfdesc",tset:"bg-gradual-tred",hiddenTitle:2,isArrow:2},jadImg:"https://sns-cdn.myxianxiaobao.com/sfximao/join-ad.png",jicon01:"https://sns-cdn.myxianxiaobao.com/sfximao/join-icon-01.png",jicon02:"https://sns-cdn.myxianxiaobao.com/sfximao/join-icon-02.png",jicon03:"https://sns-cdn.myxianxiaobao.com/sfximao/join-icon-03.png",type:""}},onLoad:function(e){this.type=e.type,this.type&&this.saveUserInfo()},methods:{goUrl:function(e){o.default.goUrl(e)},saveUserInfo:function(){var n=s.globalData.userInfo;s.$vm.saveData(n).then(function(n){e.$emit("getUserInfo",{msg:"更新用户信息"})})},joinFunc:function(){var n=this,t={pay_from:wx.IS_IOS?1:2,platform:1,app_name:"51y"};i.default.getGateCheck(t).then(function(t){if(1e4===t.code)e.reLaunch({url:"/pages/index/index"});else if(99997===t.code){var a=t.data&&1*t.data.order_id;n.createOrder(a)}else n.messageFunc("加入失败，请重试")})},createOrder:function(n){var t=this;i.default.getGatePay({order_id:n}).then(function(a){if(1e4===a.code){var c=a.data;o.default.pay(c).then(function(a){console.log(a," at pages\\message\\join.vue:106"),a?t.messageFunc("加入成功！",function(){e.$emit("getUserInfo",{msg:"更新用户信息"}),e.reLaunch({url:"/pages/index/index?fromType=vip"})}):t.messageFunc("支付取消！",function(){i.default.cancle({order_id:n})})}).catch(function(){t.messageFunc("支付取消！",function(){i.default.cancle({order_id:n})})})}else t.messageFunc("生成订单失败，请重试")})},messageFunc:function(e,n){wx.showToast({title:e,duration:1e3,icon:"none",success:function(){n&&n()}})}}});n.default=u}).call(this,t("6e42")["default"])},"476f":function(e,n,t){"use strict";t.r(n);var a=t("488b"),o=t("c436");for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);t("696e");var c=t("2877"),s=Object(c["a"])(o["default"],a["a"],a["b"],!1,null,null,null);n["default"]=s.exports},"488b":function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement;e._self._c},o=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},"696e":function(e,n,t){"use strict";var a=t("aac3"),o=t.n(a);o.a},aac3:function(e,n,t){},c436:function(e,n,t){"use strict";t.r(n);var a=t("3962"),o=t.n(a);for(var i in a)"default"!==i&&function(e){t.d(n,e,function(){return a[e]})}(i);n["default"]=o.a}},[["f757","common/runtime","common/vendor"]]]);