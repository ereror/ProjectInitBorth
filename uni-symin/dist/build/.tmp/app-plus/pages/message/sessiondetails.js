(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/sessiondetails"],{"69c5":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("2f62"),i=n(a("66fd")),c=n(a("6d8e"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach(function(e){u(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h=i.default.extend({data:function(){return{barconfig:{CustomBar:wx.STATUS_BAR_HEIGHT+wx.DEFAULT_HEADER_HEIGHT,StatusBar:wx.STATUS_BAR_HEIGHT,title:"比伯Jane",bgset:"bg-gradual-dred",tset:"bg-gradual-tred",hiddenTitle:1},youchat:{chattype:"p2p",account:"haoyou",avatar:"/static//images/iconH.jpg",uid:"-1",msg:""},blacklistbs:!1}},computed:r({},(0,s.mapGetters)({nim:"nim",userInfo:"userInfo",chatList:"chatList",thischatList:"thischatList",chatListaccount:"chatListaccount",chatListaccountsession:"chatListaccountsession"})),onLoad:function(t){var e=this;console.log(t," at pages\\message\\sessiondetails.vue:53"),this.barconfig.title=t.nick||"未知昵称",this.youchat={chattype:t.chattype||"p2p",account:t.account||"haoyou",avatar:t.avatar||"",uid:t.uid||"-1",msg:t.msg||""};var a=this.youchat.account;this.RefreshtheDialogue(a),this.youchat.uid&&parseInt(this.youchat.uid)>=0&&c.default.getOtherUser({member_id:this.youchat.uid}).then(function(t){1e4===t.code&&(e.blacklistbs=0!=t.data.relationship.bh)}),"notice"!=this.youchat.account&&"service"!=this.youchat.account?c.default.yxuserdata({yx_id_list:JSON.stringify([this.youchat.account])}).then(function(t){if(1e4==t.code){console.log("用户详情"," at pages\\message\\sessiondetails.vue:92");for(var a={},s=0,i=t.data.other.length;s<i;s++)a[t.data.other[s].yxID]=t.data.other[s];e.youchat.avatar=a[e.youchat.account].header_url,e.barconfig.title=a[e.youchat.account].nickname}}):"notice"==this.youchat.account?(this.youchat.avatar="/static/images/systemicon.png",this.barconfig.title="系统通知"):(this.youchat.avatar="/static/images/serveicon.png",this.barconfig.title="客服")},methods:{RefreshtheDialogue:function(e){var a=this;wx.NIMFUN.getHistoryMsgs({scene:"p2p",to:e,limit:20,asc:!0,endTime:0,done:function(s,i){s?t.showToast({title:"请检查网络后重试",icon:"none",duration:3e3}):(console.log("当前用户：",e,i.msgs," at pages\\message\\sessiondetails.vue:119"),a.thischatList["p2p-".concat(e)]=i.msgs,console.log(a.thischatList["p2p-".concat(e)]," at pages\\message\\sessiondetails.vue:121"),a.$store.dispatch("chatListaccountsession","p2p-".concat(e)),a.$store.dispatch("thischatList",a.thischatList))}})},blacklistos:function(){return!!wx.USER.blacklist[this.youchat.account]},pullgRelation:function(t){c.default.pullgRelatioasdasn(t.detail.data).then(function(e){t.detail.dons(e.code)})},sendmeg:function(t){var e=this;wx.NIMFUN.sendText({scene:t.detail.scene,to:t.detail.to,text:t.detail.text,done:function(a,s){var i=e.thischatList[e.chatListaccountsession];(!i||!Array.isArray(i)||i.length<=0)&&(i=[]),i.push(s),e.thischatList[e.chatListaccountsession]=i,e.$store.dispatch("thischatList",e.thischatList),t.detail.dons(s)}})}}});e.default=h}).call(this,a("6e42")["default"])},c444:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=(t._self._c,t.blacklistos());t.$mp.data=Object.assign({},{$root:{m0:a}})},i=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i})},c675:function(t,e,a){"use strict";a.r(e);var s=a("c444"),i=a("e77c");for(var c in i)"default"!==c&&function(t){a.d(e,t,function(){return i[t]})}(c);var n=a("2877"),o=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=o.exports},e77c:function(t,e,a){"use strict";a.r(e);var s=a("69c5"),i=a.n(s);for(var c in s)"default"!==c&&function(t){a.d(e,t,function(){return s[t]})}(c);e["default"]=i.a}},[["53a0","common/runtime","common/vendor"]]]);