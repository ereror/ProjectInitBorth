(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tool/cropper"],{"144c":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("eb06")),r=a(i("8212")),o=a(i("66fd"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u=wx.getSystemInfoSync(),s=u.windowWidth,p=u.windowHeight-50,h=(getApp(),o.default.extend({data:function(){return{type:"",originSrc:"",isChange:!1,cropperOpt:{id:"cropper",rotateI:0,tranlateX:s/2,tranlateY:p/2,width:s,height:p,scale:2.5,zoom:8,cut:{x:(s-s/1.6)/2,y:(p-.8*s)/2,width:s/1.6,height:s/1.6}},sizex:750,sizey:420}},methods:{getCropperImage:function(){this.wecropper.getCropperImage(function(e){e?wx.previewImage({current:"",urls:[e]}):console.log("获取图片地址失败，请稍后重试"," at pages\\tool\\cropper.vue:65")})},uploadTap:function(){var e=this;wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.isChange=!0;var i=t.tempFilePaths[0],n=t.tempFiles[0].size,o=i.substr(i.lastIndexOf(".")+1,i.length);if(n>5e7)return r.default.showFail("上传图片大小不能大于50M！");"jpg"!==o&&"jpeg"!==o&&"png"!==o?r.default.showFail("上传图片格式为jpg、png、jpeg"):(e.wecropper.pushOrign(i),e.originSrc=i)}})},saveCropperImage:function(){var e=this,t=this.type,i=this.originSrc;if(!this.isChange)return wx.navigateBack();this.wecropper.getCropperImage(function(n){var o;n&&t.length&&e.isChange?(r.default.getPage(-1).setData((o={},c(o,t,n),c(o,"originSrc",i),o)),wx.navigateBack()):console.log("生成图片地址失败，请稍后重试"," at pages\\tool\\cropper.vue:108")})},touchStart:function(e){this.wecropper.touchStart(e)},touchMove:function(e){this.wecropper.touchMove(e)},touchEnd:function(e){this.wecropper.touchEnd(e)}},onLoad:function(e){this.isChange=!1;var t=this.cropperOpt,i=e.ratio,r=(e.src,e.type);e.width&&e.height&&e.sizex&&e.sizey&&(t.cut.width=1*e.width,t.cut.height=1*e.height,t.cut.x=(s-1*e.width)/2,t.cut.y=(p-1*e.height)/2,this.cropperOpt=t,this.sizex=e.sizex,this.sizey=e.sizey),this.type=r;if(i){var o=this.cropperOpt,a=(o.width,o.height),c=this.cropperOpt.cut.width,u=c*i,h=(a-u)/2;this.cropperOpt.cut.y=h,this.cropperOpt.cut.height=u}this.wecropper=new n.default(t).on("ready",function(e){}).on("beforeImageLoad",function(e){wx.showToast({title:"上传中",icon:"loading",duration:2e4})}).on("imageLoad",function(e){wx.hideToast()}).on("beforeDraw",function(e,t){}).updateCanvas()}}));t.default=h},8991:function(e,t,i){"use strict";i.r(t);var n=i("e4ab"),r=i("bfd7");for(var o in r)"default"!==o&&function(e){i.d(t,e,function(){return r[e]})}(o);i("fc64");var a=i("2877"),c=Object(a["a"])(r["default"],n["a"],n["b"],!1,null,null,null);t["default"]=c.exports},bfd7:function(e,t,i){"use strict";i.r(t);var n=i("144c"),r=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=r.a},d75d:function(e,t,i){},e4ab:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},fc64:function(e,t,i){"use strict";var n=i("d75d"),r=i.n(n);r.a}},[["cbce","common/runtime","common/vendor"]]]);