(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/userinfo/othersd"],{

/***/ 182:
/*!****************************************!*\
  !*** ./src/pages/userinfo/othersd.vue ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _othersd_vue_vue_type_template_id_1195a962___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./othersd.vue?vue&type=template&id=1195a962& */ 183);
/* harmony import */ var _othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./othersd.vue?vue&type=script&lang=js& */ 185);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./othersd.vue?vue&type=style&index=0&lang=css& */ 187);
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 22);






/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _othersd_vue_vue_type_template_id_1195a962___WEBPACK_IMPORTED_MODULE_0__["render"],
  _othersd_vue_vue_type_template_id_1195a962___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "src/pages/userinfo/othersd.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 183:
/*!***********************************************************************!*\
  !*** ./src/pages/userinfo/othersd.vue?vue&type=template&id=1195a962& ***!
  \***********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_template_id_1195a962___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./othersd.vue?vue&type=template&id=1195a962& */ 184);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_template_id_1195a962___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_template_id_1195a962___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 184:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/userinfo/othersd.vue?vue&type=template&id=1195a962& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  if (!_vm._isMounted) {
    _vm.e0 = function($event) {
      _vm.tipShow = false
    }

    _vm.e1 = function($event) {
      _vm.showchose = true
    }

    _vm.e2 = function($event) {
      _vm.showchose = false
    }
  }
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 185:
/*!*****************************************************************!*\
  !*** ./src/pages/userinfo/othersd.vue?vue&type=script&lang=js& ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./othersd.vue?vue&type=script&lang=js& */ 186);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 186:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/userinfo/othersd.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 2));

var _index = _interopRequireDefault(__webpack_require__(/*! ../../static/utils/index.js */ 10));

var _info = _interopRequireDefault(__webpack_require__(/*! ../../api/info/info */ 15));

var _vuex = __webpack_require__(/*! vuex */ 27);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var app = getApp();

var _default = _vue.default.extend({
  data: function data() {
    return {
      model: 1,
      // 0 个人中心页，1，他人看到的中心页
      title: 'Hello',
      STATUS_BAR_HEIGHT: wx.STATUS_BAR_HEIGHT,
      DEFAULT_HEADER_HEIGHT: wx.DEFAULT_HEADER_HEIGHT,
      barconfig: {
        CustomBar: wx.STATUS_BAR_HEIGHT + wx.DEFAULT_HEADER_HEIGHT,
        StatusBar: wx.STATUS_BAR_HEIGHT,
        title: '51约',
        bgset: 'bg-gradual-dred',
        tset: 'bg-gradual-tred',
        hiddenTitle: 2,
        isArrow: 2
      },
      isvideoRz: 0,
      // 是否视频认证
      id: '',
      tipShow: true,
      tipContent: '视频没有认证',
      tipStyle: {
        'background': '#ffb400',
        'color': 'white'
      },
      items: [],
      swiperConf: {
        interval: 5000,
        duration: 500,
        autoplay: true,
        circular: true,
        mode: 'aspectFill'
      },
      uinfoDetail: [{
        key: '0',
        title: '邀约项目',
        icon: '',
        content: '希望一起吃饭',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '',
        isInput: false,
        selfconf: false
      }, {
        key: '1',
        title: '身高',
        icon: '',
        content: '170cm',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '',
        isInput: false,
        selfconf: false
      }, {
        key: '2',
        title: '职业',
        icon: '',
        content: 'IT/互联网',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '',
        isInput: false,
        selfconf: false
      }, {
        key: '3',
        title: '年收入',
        icon: '',
        content: '20~30w',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '',
        isInput: false,
        selfconf: false
      }, {
        key: '4',
        title: '微信已认证',
        icon: '',
        content: '',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '',
        isInput: false,
        selfconf: true
      }, {
        key: '5',
        title: '手机已认证',
        icon: '',
        content: '',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '',
        isInput: false,
        selfconf: true,
        last: true
      }],
      popmaskStyle: {
        "background-color": "rgba(0,0,0,.5)"
      },
      uinfoinputStyle: {
        'border-bottom': 0
      },
      userInfo: {},
      // 他人详情
      userInfoDetail: {},
      selfTypes: [],
      selfPays: [],
      isWxrz: 0,
      // 微信认证
      isSjrz: 0,
      // 手机认证
      showChoosebox: false,
      // 显示弹框
      boxconfig: {
        key: 0,
        model: 1,
        title: '',
        content: '',
        btn: {
          ok: '确定',
          okcolor: 'd-color-r',
          cancel: '取消',
          cancolor: 'd-color-b'
        }
      },
      useKeys: 5,
      checkType: 'wx',
      copyStr: '',
      // 是否打开复制
      goVip: false,
      isUseKey: 0,
      // 0 不使用， 1 wx 2 手机 3 邀约
      goRz: false,
      showchose: false,
      d_icon_sh: '../../static/images/d-icon-sh.png',
      d_icon_ck: '../../static/images/d-icon-ck.png',
      d_icon_tx: '../../static/images/d-icon-tx.png',
      d_icon_lh: '../../static/images/d-icon-lh.png',
      // d_icon_ybtn: '../../static/images/d-icon-ybtn.png'
      vHot: 'https://sns-cdn.myxianxiaobao.com/sfximao/v-hot.png'
    };
  },
  computed: _objectSpread({}, (0, _vuex.mapGetters)({
    chatListaccount: 'chatListaccount',
    // 当前对话用户账号
    chatListaccountsession: 'chatListaccountsession',
    //当前对话会话id
    thischatList: 'thischatList' //聊天记录

  })),
  onLoad: function onLoad(param) {
    this.id = param.id || '';
    this.selfTypes = app.globalData.selfTypes;
    this.selfPays = app.globalData.selfPays;
    if (this.id) this.getOtherInfo(this.id);
  },
  onShow: function onShow() {
    this.userInfo = app.globalData.userInfo;
    this.locationInfo = app.globalData.locationInfo;
  },
  onShareAppMessage: function onShareAppMessage() {
    var gender = this.userInfoDetail.gender === 1 ? '小哥哥' : '小姐姐';
    return {
      title: "\u6211\u53D1\u73B0\u4E00\u4E2A\u6709\u8DA3\u7684".concat(gender, "\u63A8\u8350\u7ED9\u4F60"),
      path: '/pages/index/index?otherId=' + this.userInfoDetail.memberID + '&from=user&id=' + this.userInfo.memberID,
      imageUrl: this.userInfoDetail.header_url,
      success: function success(d) {}
    };
  },
  methods: {
    init: function init() {
      var _this = this;

      // 初始化数据
      this.isWxrz = 0;
      this.isSjrz = 0;
      this.isvideoRz = 0;

      if (this.userInfoDetail.nickname) {
        // wx.setNavigationBarTitle({
        // 	title: this.userInfoDetail.nickname
        // })
        this.barconfig.title = this.userInfoDetail.nickname;
      }

      if (this.userInfoDetail.video_permit || this.userInfoDetail.video_verfiy) this.isvideoRz = 1;

      if (this.isvideoRz === 0 || !this.userInfo.video_url) {
        this.tipContent = '对方未通过视频认证，谨防酒托，骗子';
      }

      this.userInfoDetail.picture = this.userInfoDetail.picture || [];
      this.userInfoDetail.height = this.userInfoDetail.height || 170;
      var imgArr = this.userInfoDetail.picture.filter(function (v) {
        v.src = v.value;
        return v.src;
      });
      var header_url = this.userInfoDetail.header_url ? this.userInfoDetail.header_url : this.userInfoDetail.gender === 1 ? app.globalData.Iitemimg : app.globalData.Iitemimgw;
      var Headimg = {
        src: header_url
      };
      imgArr.unshift(Headimg);
      this.items = imgArr; // 设置数据

      var selfTypesChoose = this.selfTypes.filter(function (v) {
        return v.value === _this.userInfoDetail.objective * 1;
      });
      var selfPaysChoose = this.selfPays.filter(function (v) {
        return v.value === _this.userInfoDetail.revenue * 1;
      });
      this.uinfoDetail[0].content = selfTypesChoose && selfTypesChoose.length && '希望一起' + selfTypesChoose[0].text || '希望一起吃饭';
      this.uinfoDetail[1].content = this.userInfoDetail.height + 'cm';
      this.uinfoDetail[2].content = this.userInfoDetail.occupation_str || 'IT/互联网';
      this.uinfoDetail[3].content = selfPaysChoose && selfPaysChoose.length && selfPaysChoose[0].text || '20-30w';

      if (!this.userInfoDetail.is_wechat_number) {
        this.uinfoDetail[4].title = '微信未认证';
      }

      if (!_index.default.isEmpty(this.userInfoDetail.location)) {
        this.userInfoDetail.addr = this.userInfoDetail.location && this.userInfoDetail.location.location;
        this.userInfoDetail.loginTime = _index.default.ctDate(this.userInfoDetail.location && this.userInfoDetail.location.heartbeat * 1000); // this.userInfoDetail.addr = locationstr.substr(0, locationstr.indexOf('市') + 1) || ''

        this.userInfoDetail.distance = _index.default.distance(this.locationInfo.latitude, this.locationInfo.longitude, this.userInfoDetail.location.latitude, this.userInfoDetail.location.longitude);
      }
    },
    getOtherInfo: function getOtherInfo(id) {
      var _this2 = this;

      _index.default.showLoading('加载中...');

      _info.default.getOtherUser({
        member_id: id
      }).then(function (res) {
        _index.default.hideAll();

        if (res.code === 10000) {
          _this2.userInfoDetail = res.data;
          if (_this2.userInfoDetail.relationship && !_this2.userInfoDetail.relationship.bh) _this2.init();else _this2.messageFunc('你已被对方拉黑无法再访问Ta', function () {
            uni.navigateBack();
          }, 1000);
        }
      });
    },
    checkVideo: function checkVideo(e) {
      var _this3 = this;

      this.goRz = false;
      this.goVip = false;
      this.isUseKey = 0; // let verfiy = this.userInfo && this.userInfo.verfiy_list && this.userInfo.verfiy_list.filter(v => v.type === 'video')
      // if (verfiy.length && verfiy[0].pass === 0) {
      // 	this.boxconfigfunc('你的视频正在审核中，请耐心等待', '好的', '', true)
      // 	return
      // }
      // if (verfiy.length && verfiy[0].pass === 2 || !this.userInfo.video_url) {
      // 	this.boxconfigfunc('本着公平原则，查看对方视频认证, 自己需要进行认证', '去认证', '取消', true)
      // 	this.goRz = true
      // 	return
      // } else {
      // 	if (!this.id) return this.messageFunc('当前视频源出错了~')
      // 	infoService.getOtherVideo({check_id: this.id}).then(res => {
      // 		switch (res.code){
      // 			case 10000:
      // 				uni.navigateTo({
      // 					url: `/pages/tool/video?url=${res.data}&from=other&type=rz&header_url=${this.userInfoDetail.header_url}&memberID=${this.userInfoDetail.memberID}&nickname=${this.userInfoDetail.nickname}`
      // 				});
      // 				break;
      // 			case 99995:
      // 			    this.boxconfigfunc(res.msg, '去认证', '取消', true)
      // 				this.goRz = true
      // 				break;
      // 			case 99994:
      // 			    this.boxconfigfunc(res.msg, '好的', '', true)
      // 				break;
      // 			default:
      // 				this.boxconfigfunc(res.msg, '好的', '', true)
      // 				break;
      // 		}
      // 	})
      // }

      if (!this.id) return this.messageFunc('当前视频源出错了~');

      _info.default.getOtherVideo({
        check_id: this.id
      }).then(function (res) {
        switch (res.code) {
          case 10000:
            uni.navigateTo({
              url: "/pages/tool/video?url=".concat(res.data, "&from=other&type=rz&header_url=").concat(_this3.userInfoDetail.header_url, "&memberID=").concat(_this3.userInfoDetail.memberID, "&nickname=").concat(_this3.userInfoDetail.nickname)
            });
            break;

          case 99995:
            _this3.boxconfigfunc(res.msg, '去认证', '取消', true);

            _this3.goRz = true;
            break;

          case 99994:
            _this3.boxconfigfunc(res.msg, '好的', '', true);

            break;

          default:
            _this3.boxconfigfunc(res.msg, '好的', '', true);

            break;
        }
      });
    },
    checkDetail: function checkDetail(e) {
      this.goRz = false;
      this.goVip = false;
      this.isUseKey = 0;

      var _utils$getData = _index.default.getData(e),
          key = _utils$getData.key;

      var type = key === 'phone' ? '手机' : '微信';
      var sendType = key === 'phone' ? 1 : 2;
      var keys = this.userInfo && this.userInfo.rest_key_num || this.userInfoDetail && this.userInfoDetail.my && this.userInfoDetail.my.rest_key_num || 0;
      this.checkType = key; // 查看是否允许查看

      if (sendType === 1 && this.userInfoDetail.phone_permit) {
        return this.messageFunc('诶~该用户设置手机不可查看哦~');
      }

      if (sendType === 2 && this.userInfoDetail.phone_permit) {
        return this.messageFunc('诶~该用户设置微信不可查看哦~');
      }

      if (sendType === 1 && this.userInfoDetail && this.userInfoDetail.relationship && this.userInfoDetail.relationship.phone_status === 1) {
        this.isUseKey = 1;
        this.checkPhoneOrWechat();
        return;
      }

      if (sendType === 2 && this.userInfoDetail && this.userInfoDetail.relationship && this.userInfoDetail.relationship.wechat_status === 1) {
        this.isUseKey = 2;
        this.checkPhoneOrWechat();
        return;
      }

      if (this.userInfo.vip_id === 0) {
        this.boxconfigfunc("\u67E5\u770B".concat(type, "\u9700\u8981\u5347\u7EA7\u4F1A\u5458"), "\u5347\u7EA7vip", '取消', true);
        this.goVip = true;
      } else if (keys < 5 && this.userInfo.vip_id < 4) {
        this.boxconfigfunc("\u67E5\u770B".concat(type, "\u9700\u8981\u6D88\u8017\u94A5\u5319").concat(this.useKeys, " \u60A8\u5F53\u524D\u5269\u4F59\u94A5\u5319").concat(keys, " \u94A5\u5319\u4E0D\u8DB3\uFF0C\u9700\u8981\u5347\u7EA7VIP"), "\u5347\u7EA7vip", '取消', true);
        this.goVip = true;
      } else if (this.userInfo.keys < 5 && this.userInfo.vip_id === 4) {
        this.boxconfigfunc("\u94A5\u5319\u5DF2\u7528\u5B8C\uFF0C\u4F60\u5DF2\u7ECF\u662F\u6700\u9AD8\u7B49\u7EA7VIP, \u65E0\u6CD5\u518D\u5347\u7EA7, \u660E\u5929\u518D\u6765\u67E5\u770BTa\u7684".concat(type, "\u5427"), "\u597D\u7684", '', true);
      } else {
        this.boxconfigfunc("\u67E5\u770B".concat(type, "\u9700\u8981\u6D88\u8017\u94A5\u5319").concat(this.useKeys, " \u60A8\u5F53\u524D\u5269\u4F59\u94A5\u5319").concat(keys), "\u4F7F\u7528", '取消', true);
        this.isUseKey = key === 'phone' ? 1 : 2;
      }
    },
    goUrl: function goUrl(e) {
      _index.default.goUrl(e);
    },
    goYue: function goYue() {
      this.goRz = false;
      this.goVip = false;
      this.isUseKey = 0; // 邀约项目

      if (this.userInfoDetail && this.userInfoDetail.relationship && this.userInfoDetail.relationship.relation) return this.createRelation();
      var keys = this.userInfo && this.userInfo.rest_key_num || this.userInfoDetail && this.userInfoDetail.my && this.userInfoDetail.my.rest_key_num || 0; // if (this.userInfo.isVip === 0 && this.userInfoDetail.) {
      // 	this.boxconfigfunc(`此人当前人气过高，升级VIP才可以邀约TA`, `升级vip`, '取消', true)
      // 	this.goVip = true
      // 	return
      // }

      if (keys >= 1) {
        this.boxconfigfunc("\u60A8\u5F53\u524D\u5269\u4F59\u94A5\u5319".concat(keys), "\u4F7F\u7528", '取消', true);
        this.isUseKey = 3;
      } else if (keys < 1 && this.userInfo.vip_id < 4) {
        this.goVip = true;
        this.boxconfigfunc("\u94A5\u5319\u5DF2\u7528\u5B8C\uFF0C\u5347\u7EA7\u4F1A\u5458", "\u5347\u7EA7vip", '取消', true);
      } else if (keys < 1 && this.userInfo.vip_id === 4) {
        this.boxconfigfunc("\u94A5\u5319\u5DF2\u7528\u5B8C\uFF0C\u4F60\u5DF2\u7ECF\u662F\u6700\u9AD8 \u7B49\u7EA7VIP,\u65E0\u6CD5\u518D\u5347\u7EA7 \u8BF7\u660E\u5929\u518D\u8054\u7CFBTa\u5427~", "\u597D\u7684", '取消', true);
      }
    },
    surefunc: function surefunc(e) {
      // 弹框消耗
      // let type = this.checkType === 'phone' ? '手机' : '微信'
      if (this.copyStr.length) {
        this.copyFunc(this.copyStr);
        this.copyStr = '';
        return;
      }

      if (this.isUseKey) {
        return this.useKey();
      }

      if (this.goRz) {
        this.goRz = false;
        var url = '/pages/tool/videorz';
        if (!this.userInfo.video_url.length) url = '/pages/regist/stepvideo';
        uni.navigateTo({
          url: url
        });
        this.showChoosebox = false;
        return;
      }

      if (this.goVip) {
        this.goVip = false;
        uni.navigateTo({
          url: '/pages/userinfo/vip'
        });
        this.showChoosebox = false;
        return;
      }

      if (this.userInfo.status === 0) uni.navigateTo({
        url: '/pages/userinfo/index',
        success: function success() {
          this.showChoosebox = false;
        }
      });
      this.showChoosebox = false;
    },
    cancelfunc: function cancelfunc() {
      this.boxconfigfunc();
    },
    useKey: function useKey() {
      // 消耗钥匙
      if (this.isUseKey === 1 || this.isUseKey === 2) {
        this.checkPhoneOrWechat();
      }

      if (this.isUseKey === 3) {
        this.createRelation();
      }
    },
    createRelation: function createRelation() {
      var _this4 = this;

      // 建立关系
      this.goRz = false;
      this.goVip = false;
      this.isUseKey = 0;
      this.showChoosebox = false;
      var param = {
        accept_id: this.userInfoDetail.memberID
      };

      _info.default.createRelation(param).then(function (res) {
        if (res.code === 10000) {
          // 建立聊天消息
          _this4.messageFunc(res.msg);

          _this4.$store.dispatch('chatListaccount', _this4.userInfoDetail.yxID);

          _this4.$store.dispatch('chatListaccountsession', 'p2p' + _this4.userInfoDetail.yxID);

          _this4.RefreshtheDialogue();

          var msg = "\u6211\u62A5\u540D\u4E86\u4F60\u7684".concat(_this4.uinfoDetail[0].content, "\uFF08\u9879\u76EE\uFF09");

          if (res.data.key != 1) {
            msg = '';
          }

          var url = "/pages/message/sessiondetails?chattype=".concat('p2p', "&account=", _this4.userInfoDetail.yxID, "&avatar=").concat(_this4.userInfoDetail.header_url, "&nick=").concat(_this4.userInfoDetail.nickname, "&session=").concat('p2p' + _this4.userInfoDetail.yxID, "&uid=").concat(_this4.userInfoDetail.memberID, "&msg=").concat(msg);
          uni.navigateTo({
            url: url,
            success: function success(res) {
              // uni.$emit('getUserInfo')
              app.$vm.getUserInfo(true).then(function (res) {
                _this4.userInfo = res; // this.init()
              });
            },
            fail: function fail() {},
            complete: function complete() {}
          });
        } else {
          if (res.code === 99992) {
            _this4.goVip = true;

            _this4.boxconfigfunc("\u6B64\u4EBA\u5F53\u524D\u4EBA\u6C14\u8FC7\u9AD8\uFF0C\u5347\u7EA7VIP\u624D\u53EF\u4EE5\u9080\u7EA6TA", "\u5347\u7EA7vip", '取消', true); // 	return

          } else {
            _this4.messageFunc(res.msg);
          }
        }
      });
    },

    /**
     * 刷新当前会话最后20条记录
     */
    RefreshtheDialogue: function RefreshtheDialogue() {
      var _this5 = this;

      wx.NIMFUN.getHistoryMsgs({
        scene: 'p2p',
        to: this.chatListaccount,
        // 账号
        limit: 20,
        //每页条数
        asc: true,
        // 时间到序排序
        endTime: 0,
        // 当前页  时间
        done: function done(err, obj) {
          if (err) {
            uni.showToast({
              title: '请检查网络后重试',
              icon: 'none',
              duration: 3000
            });
            return;
          } // let list = this.thischatList[this.chatListaccountsession]
          // if (!list || !Array.isArray(list) || list.length <= 0) {
          //     list = []
          // }
          // obj.msgs.map(item => {
          //     list.push(item)
          // })


          console.log('当前用户：', _this5.chatListaccount, obj.msgs);
          _this5.thischatList[_this5.chatListaccountsession] = obj.msgs;

          _this5.$store.dispatch('thischatList', _this5.thischatList);
        }
      });
    },
    // 查看手机号或者微信号
    checkPhoneOrWechat: function checkPhoneOrWechat() {
      var _this6 = this;

      var sendType = this.isUseKey;
      this.isCopy = 0;
      if (sendType !== 1 && sendType !== 2 || !this.id) return this.messageFunc('当前用户信息错误~');

      _info.default.checkPhoneOrWechat({
        check_type: sendType,
        check_id: this.id
      }).then(function (res) {
        if (res.code === 10000) {
          var title = (_this6.userInfoDetail.nickname || '千年老怪') + '的' + (_this6.isUseKey === 1 ? '手机号' : '微信');

          _this6.boxconfigfunc("".concat(res.data), "\u70B9\u51FB\u4E00\u952E\u590D\u5236", '', true, title);

          _this6.copyStr = res.data || ''; // 查看成功触发更新

          app.$vm.getUserInfo(true).then(function (res) {
            _this6.userInfo = res; // this.init()
          });

          _this6.setUserInfoDetail(_this6.isUseKey === 1 ? 'phone_status' : 'wechat_status', 1);
        } else {
          _this6.boxconfigfunc(res.msg, "\u597D\u7684", '', true);

          _this6.isUseKey = 0;
        }
      }).catch(function (err) {
        _this6.showChoosebox = false;

        _this6.messageFunc('当前用户信息错误~');
      });
    },
    setUserInfoDetail: function setUserInfoDetail(type, val) {
      this.userInfoDetail.relationship[type] = val;
    },
    copyFunc: function copyFunc(msg) {
      var that = this;
      var title = this.isUseKey === 1 ? '手机号' : '微信';
      wx.setClipboardData({
        data: msg,
        success: function success(res) {
          that.messageFunc("\u590D\u5236".concat(title, "\u6210\u529F\uFF0C\u8D76\u7D27\u53BB\u6DFB\u52A0Ta\u5427"));
        },
        complete: function complete() {
          that.showChoosebox = false;
        }
      });
    },
    boxconfigfunc: function boxconfigfunc() {
      var content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var oktext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var cancelText = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
      var show = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var title = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';
      this.boxconfig.title = title;
      this.boxconfig.content = content;
      this.boxconfig.btn.ok = oktext;
      this.boxconfig.btn.cancel = cancelText;
      this.showChoosebox = show;
    },
    messageFunc: function messageFunc(str, callback) {
      var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      wx.showToast({
        title: str || '当前信息处理错误',
        duration: 1000,
        icon: 'none',
        success: function success() {
          setTimeout(function () {
            callback && callback();
          }, time);
        }
      });
    },
    sendMsg: function sendMsg(e) {
      var _this7 = this;

      var _utils$getData2 = _index.default.getData(e),
          key = _utils$getData2.key;

      var notice_type = 1;
      if (key === 'wx') notice_type = 2; // 发送提醒消息

      var param = {
        notice_id: this.userInfoDetail.memberID,
        notice_type: notice_type
      };

      _index.default.showLoading();

      _info.default.sendNotice(param).then(function (res) {
        _index.default.hideAll();

        if (res.code === 10000) {
          _this7.messageFunc("\u63D0\u9192\u6210\u529F");
        } else {
          _this7.messageFunc(res.msg);
        }
      });
    },
    relationShip: function relationShip() {
      var _this8 = this;

      // 处理拉黑消息
      var relationship = this.userInfoDetail.relationship && !this.userInfoDetail.relationship.h;
      var param = {
        target_id: this.userInfoDetail.memberID,
        relation_type: 1,
        value: Number(relationship)
      };

      _info.default.pullgRelatioasdasn(param).then(function (res) {
        if (res.code === 10000) {
          _this8.userInfoDetail.relationship.h = !_this8.userInfoDetail.relationship.h;
          var str = '取消拉黑成功';
          if (relationship) str = '拉黑成功';

          _this8.messageFunc(str);
        } else {
          _this8.messageFunc(res.msg);
        }
      });
    },
    goDetail: function goDetail(e) {
      var _utils$getData3 = _index.default.getData(e),
          url = _utils$getData3.url,
          uid = _utils$getData3.uid;

      if (url) {
        uni.navigateTo({
          url: url + '?uid=' + uid
        });
        this.showchose = false;
      }
    },
    goBack: function goBack() {
      uni.navigateBack({});
    },
    createFormId: function createFormId(e) {
      if (e.detail.formId) app.$vm.sendFormId(e.detail.formId);
    }
  }
});

exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 187:
/*!*************************************************************************!*\
  !*** ./src/pages/userinfo/othersd.vue?vue&type=style&index=0&lang=css& ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../node_modules/css-loader??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./othersd.vue?vue&type=style&index=0&lang=css& */ 188);
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_othersd_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 188:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/userinfo/othersd.vue?vue&type=style&index=0&lang=css& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[181,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/userinfo/othersd.js.map