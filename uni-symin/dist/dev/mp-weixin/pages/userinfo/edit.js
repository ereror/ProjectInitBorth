(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/userinfo/edit"],{

/***/ 45:
/*!*************************************!*\
  !*** ./src/pages/userinfo/edit.vue ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _edit_vue_vue_type_template_id_cb8bf8e8___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./edit.vue?vue&type=template&id=cb8bf8e8& */ 46);
/* harmony import */ var _edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./edit.vue?vue&type=script&lang=js& */ 48);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./edit.vue?vue&type=style&index=0&lang=css& */ 50);
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 22);






/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _edit_vue_vue_type_template_id_cb8bf8e8___WEBPACK_IMPORTED_MODULE_0__["render"],
  _edit_vue_vue_type_template_id_cb8bf8e8___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "src/pages/userinfo/edit.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 46:
/*!********************************************************************!*\
  !*** ./src/pages/userinfo/edit.vue?vue&type=template&id=cb8bf8e8& ***!
  \********************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_template_id_cb8bf8e8___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=template&id=cb8bf8e8& */ 47);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_template_id_cb8bf8e8___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_template_id_cb8bf8e8___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 47:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/userinfo/edit.vue?vue&type=template&id=cb8bf8e8& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  if (!_vm._isMounted) {
    _vm.e0 = function($event) {
      _vm.showchose = false
    }

    _vm.e1 = function($event) {
      _vm.showchose = false
    }
  }
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 48:
/*!**************************************************************!*\
  !*** ./src/pages/userinfo/edit.vue?vue&type=script&lang=js& ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js& */ 49);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 49:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/userinfo/edit.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 2));

var _config = _interopRequireDefault(__webpack_require__(/*! ../../config.js */ 13));

var _index = _interopRequireDefault(__webpack_require__(/*! ../../static/utils/index.js */ 10));

var _common = _interopRequireDefault(__webpack_require__(/*! ../../api/common/common.js */ 8));

var _info = _interopRequireDefault(__webpack_require__(/*! ../../api/info/info */ 15));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
var app = getApp();

var _default = _vue.default.extend({
  data: function data() {
    return {
      title: 'Hello',
      STATUS_BAR_HEIGHT: wx.STATUS_BAR_HEIGHT,
      DEFAULT_HEADER_HEIGHT: wx.DEFAULT_HEADER_HEIGHT,
      barconfig: {
        CustomBar: wx.STATUS_BAR_HEIGHT + wx.DEFAULT_HEADER_HEIGHT,
        StatusBar: wx.STATUS_BAR_HEIGHT,
        title: '编辑资料',
        bgset: 'bg-gradual-dred',
        tset: 'bg-gradual-tred',
        hiddenTitle: 2,
        isArrow: 2
      },
      prossWidth: 0,
      editDetail: [{
        key: '0',
        title: '昵称',
        icon: '',
        content: '',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '点击输入',
        isInput: true,
        selfconf: false
      }, {
        key: '1',
        title: '性别',
        icon: '',
        content: '',
        arrow: false,
        size: 40,
        type: 'button',
        url: '',
        isBorderR: false,
        placeholder: '点击选择',
        isInput: false,
        selfconf: false
      }, {
        key: '2',
        title: '出生年月',
        icon: '',
        content: '',
        arrow: true,
        size: 40,
        type: 'button',
        url: '',
        isBorderR: false,
        placeholder: '点击选择',
        isInput: false,
        selfconf: false
      }, {
        key: '3',
        title: '身高',
        icon: '',
        content: '',
        arrow: true,
        size: 40,
        type: 'button',
        url: '',
        isBorderR: false,
        placeholder: '点击选择',
        isInput: false,
        selfconf: false
      }, {
        key: '4',
        title: '行业',
        icon: '',
        content: '',
        arrow: true,
        size: 40,
        type: 'url',
        url: '/pages/tool/job',
        isBorderR: false,
        placeholder: '点击选择',
        isInput: false,
        selfconf: false
      }, {
        key: '5',
        title: '年收入',
        icon: '',
        content: '',
        arrow: true,
        size: 40,
        type: 'button',
        url: '',
        isBorderR: false,
        placeholder: '点击选择',
        isInput: false,
        selfconf: false
      }, {
        key: '6',
        title: '邀约项目',
        icon: '',
        content: '',
        arrow: true,
        size: 40,
        type: 'button',
        url: '',
        isBorderR: false,
        placeholder: '点击选择',
        isInput: false,
        selfconf: false
      }, {
        key: '7',
        title: '微信',
        icon: '',
        content: '',
        arrow: false,
        size: 40,
        type: 'text',
        url: '',
        isBorderR: false,
        placeholder: '点击输入',
        isInput: true,
        selfconf: false,
        last: true
      }],
      popmaskStyle: {
        "background-color": "rgba(0,0,0,.5)"
      },
      uinfoinputStyle: {
        'border-bottom': 0
      },
      items: [],
      boxconfig: {
        key: 0,
        model: 2,
        btn: {
          ok: '确定',
          okcolor: 'd-color-r',
          cancel: '取消',
          cancolor: 'd-color-b'
        }
      },
      choseKey: 0,
      // 选中当前项
      showkey: -1,
      // 显示第几个
      showchose: false,
      // 是否显示
      showchoseStatus: 0,
      // 选择状态 0， 审核中， 1 审核通过， 2审核未通过
      showChoosebox: false,
      isShing: true,
      editHead: 'https://sns-cdn.myxianxiaobao.com/sfximao/test1.jpg',
      editsh: '../../static/images/edit-sh.png',
      editnopass: '../../static/images/edit-nopass.png',
      editadd: '../../static/images/edit-add.png',
      jobObj: {
        id: '',
        title: ''
      },
      userInfo: {
        wx: '',
        // 微信
        nickname: '',
        // nickname
        gender: 1,
        // 性别
        birthday: '',
        // 生日
        height: 160
      },
      // status 0 审核中，1，审核通过， 2 审核失败
      imgArrs: [{
        src: 'https://sns-cdn.myxianxiaobao.com/sfximao/test1.jpg',
        pass: 1,
        key: 0,
        isbtn: false
      }, {
        src: '',
        pass: 0,
        key: 1,
        isbtn: false
      }, {
        src: '',
        pass: 0,
        key: 2,
        isbtn: false
      }, {
        src: '',
        pass: 0,
        key: 3,
        isbtn: false
      }, {
        src: '',
        pass: 0,
        key: 4,
        isbtn: false
      }, {
        src: '',
        pass: 0,
        key: 5,
        isbtn: false
      }],
      selfTypes: [],
      // 邀约项目
      selfPays: [],
      // 年收入
      selfPaysIndex: 0,
      //当前选中年收入
      selfTypesIndex: 0,
      // 当前选中邀约项目
      sexConfig: [],
      // 性别设置
      sex: 1,
      // 性别
      selfHeight: 150,
      timeChoose: [1991, 1, 15],
      initname: '',
      headChange: false,
      originSrc: '',
      originEditSrc: '' // 上传头像

    };
  },
  onLoad: function onLoad() {
    this.sexConfig = Object.assign(_config.default.sexConfig);
    this.getUserInfo();
  },
  onShow: function onShow() {
    // 显示更多消息
    this.setJob();
    this.caclWidth();
    var pages = getCurrentPages();
    var currPage = pages[pages.length - 1];

    if (currPage.data.originEditSrc) {
      this.originEditSrc = currPage.data.originEditSrc;
      this.uploadFile(this.originEditSrc, 0);
    }
  },
  methods: {
    initData: function initData() {
      var _this = this;

      // this.userInfo = this.userInfo 
      this.selfTypes = app.globalData.selfTypes;
      this.selfPays = app.globalData.selfPays;
      this.jobObj = {
        id: this.userInfo.occupation,
        title: this.userInfo.occupation_str || '全部职业'
      };
      var nickObj = this.userInfo.verfiy_list && this.userInfo.verfiy_list.filter(function (v) {
        return v.type === 'nickname';
      });
      var wxObj = this.userInfo.verfiy_list && this.userInfo.verfiy_list.filter(function (v) {
        return v.type === 'wechat';
      });
      this.initname = this.userInfo.nickname;
      this.editDetail[0].content = nickObj.length && nickObj[0].value || this.userInfo.nickname;
      this.editDetail[1].content = this.userInfo.gender === 1 ? '男' : '女';
      this.editDetail[2].content = this.userInfo.birthday;
      this.editDetail[3].content = this.userInfo.height + 'cm' || false;
      this.editDetail[4].content = this.userInfo.occupation_str || '全部职业';
      this.editDetail[5].content = this.selfPays.filter(function (v, i) {
        if (v.value === _this.userInfo.revenue * 1) {
          _this.selfPaysIndex = i;
        }

        ;
        return v.value === _this.userInfo.revenue * 1;
      })[0].text;
      this.editDetail[6].content = this.selfTypes.filter(function (v, i) {
        if (v.value === _this.userInfo.objective * 1) {
          _this.selfTypesIndex = i;
        }

        ;
        return v.value === _this.userInfo.objective * 1;
      })[0].text;
      this.editDetail[7].content = wxObj.length && wxObj[0].value != 'undefined' && wxObj[0].value; // 判断审核项目

      if (nickObj.length && nickObj[0].pass === 0 && nickObj[0].value && nickObj[0].value != 'undefined') this.editDetail[0].titleicon = '审核中';else this.editDetail[0].titleicon = '';

      if (nickObj.length && nickObj[0].pass === 2) {
        this.editDetail[0].content = this.userInfo.nickname;
      }

      if (wxObj.length && wxObj[0].value && wxObj[0].value != 'undefined') {
        this.editDetail[7].titleicon = '';
        if (wxObj[0].pass === 0) this.editDetail[7].titleicon = '审核中';

        if (wxObj[0].pass === 2) {
          this.editDetail[7].content = '';
        }
      }

      this.editDetail[7].isInput = wxObj.length ? wxObj[0].pass !== 1 : true;

      if (this.userInfo.birthday.length) {
        this.timeChoose = this.userInfo.birthday.split('-');
      }

      this.userInfo.timeChoose = this.timeChoose;
      this.setImgArr();
      this.caclWidth();
    },
    getUserInfo: function getUserInfo() {
      var _this2 = this;

      app.$vm.getUserInfo(true).then(function (res) {
        _this2.userInfo = res;

        _this2.initData('%o', _this2.userInfo);
      }).catch(function (err) {
        console.log('用户信息获取失败！');
      });
    },
    setImgArr: function setImgArr() {
      var _this3 = this;

      // 设置图片类型
      // 头像
      var headImg_set = this.userInfo && this.userInfo.verfiy_list && this.userInfo.verfiy_list.filter(function (v) {
        return v.type === 'header' && v.pass !== 2;
      })[0];

      if (headImg_set) {
        this.imgArrs[0] = {
          src: headImg_set.value || '',
          pass: headImg_set.pass || 0,
          key: 0,
          isbtn: false
        };
      } else {
        this.imgArrs[0] = {
          src: this.userInfo.header_url,
          pass: 1,
          key: 0,
          isbtn: false
        };
      }

      var imgArr = this.userInfo && this.userInfo.verfiy_list && this.userInfo.verfiy_list.filter(function (v) {
        return v.type === 'picture';
      });
      imgArr.map(function (v) {
        v.src = v.value || '', v.key = v.location;
        v.isbtn = false;
        _this3.imgArrs[v.key] = Object.assign(v);
      });
    },
    setJob: function setJob() {
      var pages = getCurrentPages();
      var currPage = pages[pages.length - 1];
      var jobObj = currPage.data.jobObj.id && currPage.data.jobObj || this.jobObj;
      this.editDetail[4].content = jobObj.title || '';
      this.editDetail[4].url = '/pages/tool/job?id=' + jobObj.id;
      this.jobObj = jobObj;
      this.userInfo.occupation = jobObj.id || 0;
      this.userInfo.occupation_str = jobObj.title;
    },
    caclWidth: function caclWidth() {
      var count = 0;
      var imgCount = this.imgArrs.filter(function (v) {
        return v.src.length;
      }).length;
      var formCount = this.editDetail.filter(function (v) {
        return v.content && v.content.length;
      }).length;
      this.prossWidth = count + formCount * 5 + imgCount * 10;
    },
    showImgBtn: function showImgBtn(key, pass) {
      // this.showchose = true
      this.showkey = key;
      this.showchoseStatus = pass;

      if (key && pass === 2) {
        this.chooseFile(key);
      } else {
        this.showchose = true;
      }
    },
    checkPic: function checkPic() {
      this.checkBtn(this.showkey);
      this.showchose = false;
    },
    checkBtn: function checkBtn(key) {
      var src = this.imgArrs[key * 1].src; // this.imgArrs[key * 1].isbtn = false

      wx.previewImage({
        current: src,
        urls: [src]
      });
    },
    deleteBtn: function deleteBtn(key) {
      var _this4 = this;

      // 删除图片
      // 删除图片请求
      var param = {
        location: key * 1
      };

      _common.default.deletePhoto(param).then(function (res) {
        if (res.code === 10000) {
          if (_this4.imgArrs[key * 1].src) _this4.caclWidth();
          _this4.imgArrs[key * 1].src = '';
          _this4.imgArrs[key * 1].isbtn = false;

          _this4.$set(_this4.imgArrs, key * 1, _this4.imgArrs[key * 1]);

          uni.$emit('getUserInfo');
        } else {
          _index.default.showFail('删除图片失败!');
        }
      });
    },
    chooseFile: function chooseFile(key) {
      // 选择上传图片
      // let { key } = e.currentTarget.dataset
      var that = this;
      wx.chooseImage({
        count: 1,
        sourceType: ['album', 'camera'],
        success: function success(res) {
          var tempFilePaths = res.tempFilePaths[0];
          that.uploadFile(tempFilePaths, key);
        }
      });
    },
    uploadFile: function uploadFile(temsrc, key) {
      // 上传文件
      var that = this;

      _index.default.showLoading('图片上传中....');

      _common.default.upload({
        filePath: temsrc
      }).then(function (res) {
        _index.default.hideAll();

        that.imgArrs[key].src = temsrc;

        if (!key) {
          that.originSrc = '';
          that.originEditSrc = '';
          that.userInfo.header_url = res.src;
          that.saveUser(that.userInfo.header_url);
          that.headChange = true;
          that.imgArrs[key].pass = 0;
        } else that.uploadPhoto(res.src, key);

        that.caclWidth();
      });
    },
    uploadPhoto: function uploadPhoto(temsrc, key) {
      var _this5 = this;

      var param = {
        value: temsrc,
        location: key
      };

      _common.default.uploadPhoto(param).then(function (res) {
        if (res.code === 10000) {
          _index.default.showSuccess('上传图片成功!');

          _this5.imgArrs[key].pass = 0;
        } else {
          _index.default.showFail('上传图片失败!');

          _this5.imgArrs[key].src = '';

          _this5.caclWidth();
        }
      });
    },
    saveMession: function saveMession() {
      if (this.userInfo.wechat_number && this.userInfo.wechat_number !== 'undefined') {
        this.boxconfig.key = 7;
        this.boxconfig.model = 1;
        this.boxconfig.content = '一旦确定好了微信，后面将无法更改 确定吗？';
        this.showChoosebox = true;
      } else {
        this.saveInfo();
      }
    },
    saveUser: function saveUser(headUrl) {
      var param = {
        id: this.userInfo.memberID,
        header_url: headUrl
      };

      _info.default.saveData(param).then(function (res) {
        if (res.code === 10000) {
          uni.$emit('getUserInfo', {
            msg: '更新用户信息'
          });
        }
      });
    },
    saveInfo: function saveInfo() {
      if (this.showChoosebox) {
        this.showChoosebox = false;
        this.boxconfig.content = '';
        this.boxconfig.model = 2;
        this.boxconfig.key = 0;
      }

      var that = this;
      var headImg_set = this.userInfo && this.userInfo.verfiy_list && this.userInfo.verfiy_list.filter(function (v) {
        return v.type === 'header';
      })[0];
      var param = {
        birthday: that.userInfo.timeChoose && that.userInfo.timeChoose.join('-'),
        gender: that.userInfo.gender,
        height: that.userInfo.height,
        revenue: that.userInfo.revenue,
        objective: that.userInfo.objective,
        occupation: that.userInfo.occupation,
        wechat_number: that.userInfo.wechat_number,
        nickname: that.userInfo.nickname // header_url: that.userInfo.header_url

      };
      if (that.editDetail[0].titleicon && that.editDetail[0].titleicon.length || this.initname === this.userInfo.nickname) delete param.nickname;
      if (that.editDetail[7].titleicon && that.editDetail[7].titleicon.length || !that.editDetail[7].isInput || !param.wechat_number) delete param.wechat_number; // if (headImg_set.value && headImg_set.pass === 0 || this.headChange) delete param.header_url

      _index.default.showLoading('数据保存中，请稍等..');

      _info.default.saveData(param).then(function (res) {
        _index.default.hideLoading();

        if (res.code === 10000) {
          _index.default.showSuccess('保存成功!', 1000);

          app.$vm.getUserInfo().then(function (res) {
            // 初始化数据
            that.initData();
          });
        } else {
          _index.default.showFail('保存失败, 请重试!');
        }
      });
    },
    chooseItem: function chooseItem(e) {
      // 处理选择数据
      var key = e.detail.val;

      switch (key) {
        //1 性别， 2，
        case '1':
          return; // this.items = this.sexConfig
          // this.boxconfig.key = 1
          // this.boxconfig.model = 2
          // this.choseKey = this.userInfo.gender - 1
          // this.showChoosebox = true

          break;

        case '2':
          // 生日
          this.boxconfig.key = 2;
          this.boxconfig.model = 3;
          this.showChoosebox = true;
          break;

        case '3':
          // 身高
          this.items = Object.assign(_config.default.selfHeight);
          this.boxconfig.key = 3;
          this.boxconfig.model = 2;
          this.choseKey = this.userInfo.height - 150;
          this.showChoosebox = true;
          break;

        case '4':
          // 行业
          _index.default.goUrl(e);

          break;

        case '5':
          // 年收入
          this.items = Object.assign(this.selfPays);
          this.boxconfig.key = 5;
          this.boxconfig.model = 2;
          this.choseKey = this.selfPaysIndex;
          this.showChoosebox = true;
          break;

        case '6':
          // 邀约项目
          this.items = Object.assign(this.selfTypes);
          this.boxconfig.key = 6;
          this.boxconfig.model = 2;
          this.choseKey = this.selfTypesIndex;
          this.showChoosebox = true;
          break;

        default:
          break;
      }
    },
    surefunc: function surefunc(obj) {
      var _obj$detail = obj.detail,
          key = _obj$detail.key,
          choseIndex = _obj$detail.choseIndex,
          time = _obj$detail.time,
          val = _obj$detail.val;

      if (!key && obj.detail) {
        return this.saveInfo();
      }

      switch (key * 1) {
        case 1:
          this.userInfo.gender = val;
          this.editDetail[1].content = this.userInfo.gender === 1 ? '男' : '女';
          this.showChoosebox = false;
          break;

        case 2:
          this.timeChoose = Object.assign(time);
          this.userInfo.timeChoose = this.timeChoose;
          this.editDetail[2].content = this.timeChoose.join('-');
          this.showChoosebox = false;
          break;

        case 3:
          this.userInfo.height = val;
          this.editDetail[3].content = this.userInfo.height + 'cm';
          this.showChoosebox = false;
          break;

        case 5:
          this.selfPaysIndex = choseIndex * 1;
          this.userInfo.revenue = val;
          this.editDetail[5].content = this.items[this.selfPaysIndex].text;
          this.showChoosebox = false;
          break;

        case 6:
          this.selfTypesIndex = choseIndex * 1;
          this.userInfo.objective = val;
          this.editDetail[6].content = this.items[this.selfTypesIndex].text;
          this.showChoosebox = false;
          break;

        default:
          break;
      }

      this.caclWidth();
    },
    optPic: function optPic() {
      // 处理
      var that = this;

      if (!this.showkey) {
        this.showchose = false;
        this.originSrc = '';
        this.originEditSrc = '';
        wx.chooseImage({
          count: 1,
          sourceType: ['album', 'camera'],
          success: function success(res) {
            var tempFilePaths = res.tempFilePaths[0];
            that.originSrc = tempFilePaths;
            uni.navigateTo({
              url: '/pages/tool/cropper?type=header_url&src=' + that.originSrc
            });
          }
        });
      } else {
        // 删除照片
        wx.showModal({
          // title: '确定删除？',
          content: '确定删除？',
          showCancel: true,
          success: function success(res) {
            if (res.confirm) {
              if (that.showkey !== -1) that.deleteBtn(that.showkey); // console.log('用户点击确定')
            } else if (res.cancel) {
              console.log('用户点击取消');
            }
          }
        });
      }

      this.showchose = false;
    },
    createFormId: function createFormId(e) {
      if (e.detail.formId) app.$vm.sendFormId(e.detail.formId);
    },
    cancelfunc: function cancelfunc() {
      this.showChoosebox = false;
    },
    valChange: function valChange(e) {
      var _e$detail = e.detail,
          key = _e$detail.key,
          val = _e$detail.val;
      if (key === '0') this.userInfo.nickname = val;
      if (key === '7') this.userInfo.wechat_number = val;
      this.caclWidth();
    }
  }
});

exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 50:
/*!**********************************************************************!*\
  !*** ./src/pages/userinfo/edit.vue?vue&type=style&index=0&lang=css& ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../node_modules/css-loader??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&lang=css& */ 51);
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_edit_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 51:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/userinfo/edit.vue?vue&type=style&index=0&lang=css& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[44,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/userinfo/edit.js.map