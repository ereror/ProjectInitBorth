<<<<<<< HEAD
{"version":3,"sources":["webpack:///./src/App.vue","webpack:///./src/App.vue?dad9","webpack:///./src/App.vue?c962","webpack:///./src/App.vue?680a","webpack:///./src/App.vue?a4bd","webpack:///./src/store/index.vue?080e","webpack:///./src/store/index.vue?ef98","webpack:///./src/store/index.vue"],"names":["store"],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACsE;AACL;AACF;;;AAG/D;AACuF;AACvF,gBAAgB,2GAAU;AAC1B,EAAE,wFAAM;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAYf;AACD;AACe,gF;;;;;;;;;;;AClCf;AAAA;AAAA,wCAA6P,CAAgB,kUAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;ACCjR;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACsB;AACyB;AACN;AACC;AACe;AACH;AACtD;AACe,0GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAQ,6DAAI;AACZ,oBAAoB,oEAAY;AAChC;AACA;AACA;AACA;AACA;AACA,QAAQ,6DAAI;AACZ;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA,YAAY,yDAAa;AACzB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oEAAY;AAChC;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oBAAoB,oEAAY;AAChC,oBAAoB,oEAAY;AAChC;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,gBAAgB,qDAAW;AAC3B;AACA;AACA;AACA,2CAA2C,UAAU;AACrD;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gBAAgB,qDAAW;AAC3B;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,wCAAwC,0EAAG;AAC3C,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAI;AACpB,gBAAgB,qDAAW;AAC3B,oBAAoB,6DAAI;AACxB;AACA,wBAAwB,6DAAI;AAC5B;AACA,qBAAqB;AACrB,wBAAwB,6DAAI;AAC5B;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,yDAAa;AAC/F,SAAS;AACT;AACA;AACA,gDAAgD,yDAAa;AAC7D;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qDAAW;AAC/B,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,sDAAsD;AACtD,0DAA0D;AAC1D,6BAA6B;AAC7B,yBAAyB;AACzB,kDAAkD;AAClD,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,2BAA2B,oEAAY;AACvC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,gBAAgB,qDAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wBAAwB,oEAAY;AACpC;AACA,iBAAiB;AACjB;AACA;AACA;AACA,CAAC,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACrcH;AAAA;AAAA;AAAA;AAA0hB,CAAgB,0kBAAG,EAAC,C;;;;;;;;;;ACA9iB;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AACyD;AACL;;;AAGpD;AAC0F;AAC1F,gBAAgB,2GAAU;AAC1B,EAAE,2EAAM;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAYf;AACD;AACe,gF;;;;;;;;;;;ACjCf;AAAA;AAAA;AAAA;AAA6Y,CAAgB,ybAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACCja;;;;eACeA,c","file":"common/main.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=text%2Fjavascript&\"\nexport * from \"./App.vue?vue&type=script&lang=text%2Fjavascript&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\project\\\\qc_study\\\\sy_project\\\\sy-mini\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7ba5bd90', component.options)\n    } else {\n      api.reload('7ba5bd90', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"src/App.vue\"\nexport default component.exports","import mod from \"-!../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=text%2Fjavascript&\"; export default mod; export * from \"-!../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=text%2Fjavascript&\"","\n// 提交正式版改一下\nwx.instantmessaging = {\n    thishe: 'formaldress',\n    // thishe: 'testclothes',\n    development: { // 开发版\n        service: { // 客服\n            id: 5,\n            token: \"ff256c222cd6a694451b54ead0b8b786\",\n            accid: \"service\",\n            title: '客服'\n        },\n        notice: { // 系统通知\n            id: 4,\n            token: \"d3d2ad74886589bcc0a13f7c98395c73\",\n            accid: \"notice\",\n            title: '系统通知'\n        },\n        appkey: '17e9bc15eeb6172f08f4e25e98194410',\n        appsecret: 'db7bf038fc1f'\n    },\n    testclothes: { // 测试服\n        service: { // 客服\n            id: 5,\n            token: \"0063951a9f7198f2f56f0953cf2fed29\",\n            accid: \"service\",\n            title: '客服'\n        },\n        notice: { // 系统通知\n            id: 4,\n            token: \"d6a3732df8b10f92a2acdbc64fbf121e\",\n            accid: \"notice\",\n            title: '系统通知'\n        },\n        appkey: '94f19e934b338488e5d914dba6bbf96e',\n        appsecret: 'a3fd98731796'\n    },\n    formaldress: { // 正式服\n        service: { // 客服\n            id: 5,\n            token: \"88ed201f39f433d810d66e70cdaa6be3\",\n            accid: \"service\",\n            title: '客服'\n        },\n        notice: { // 系统通知\n            id: 4,\n            token: \"de13d3df35a14da302df3f6c47513158\",\n            accid: \"notice\",\n            title: '系统通知'\n        },\n        appkey: 'f1f40794fc391d650373015a6d8f5683',\n        appsecret: '503c2403f0f9'\n    }\n}\n// 兼容旧版本的历史点击\nlet declaration = wx.getStorageSync('declaration')\nif (!declaration || typeof declaration != 'object') {\n    wx.setStorageSync('declaration', {})\n}\n//\t全局声明周期\nimport Vue from 'vue';\nimport commonService from './api/common/common'\nimport infoService from './api/info/info'\nimport util from './static/utils/index.js'\nimport localstorage from './static/utils/localstorage.js'\nimport NIM from '@/static/utils/message/chatconfig.js'\nlet tempid = ''\nexport default Vue.extend({\n    mpType: 'app',\n    globalData: {\n        vipIcon: ['../../static/images/vip-icon-by.png', '../../static/images/vip-icon-bj.png', '../../static/images/vip-icon-hj.png', '../../static/images/vip-icon-zs.png'],\n        code: '',\n        openid: '',\n        token: '',\n        sex: '',\n        pagesition: true, // 逛一逛页面andriod\n        searchIndexResult: false, // 根据刷选条件，查询首页是否存在数据\n        Iitemimg: 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_boy.png',\n        Iitemimgw: 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_girl.png',\n        vipItem: [],\n        isUpdateHeadUrl: '',\n        isBrush: false,\n        bannerList: [],\n        shareFrom: {\n            type: '',\n            id: ''\n        },\n        locationInfo: {\n            latitude: '',\n            longitude: '',\n        },\n        isNotRegist: true,\n        otherId: '',\n        yYtype: {\n            '吃饭': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-dinner.png',\n            '运动': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-activity.png',\n            '喝一杯': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-drank.png',\n            '恋爱': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-friend.png',\n            '玩游戏': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-game.png',\n            '看电影': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-movie.png',\n            '唱歌': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-song.png',\n            '旅游': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-trave.png'\n        }\n    },\n    data: {\n        isloading: false,\n        isNotRegist: true\n    },\n    onLaunch(param) {\n        let app = this.$options\n        let path = param.path\n        let otherId = param.query.otherId\n        app.globalData.otherId = otherId || ''\n        util.attachInfo(true)\n        let token = localstorage.getItem('token')\n        if (token) {\n            app.globalData.token = token\n            app.globalData.isNotRegist = false\n            this.init()\n        }\n        util.getCode().then(code => {\n            if (code) {\n                app.globalData.code = code\n                return new Promise((resove, reject) => {\n                    resove(code)\n                    console.log(code)\n                })\n            } else {\n                uni.showToast({\n                    title: '用户登录失败，请重新获取登录！',\n                    icon: 'none'\n                })\n                return new Promise((resove, reject) => {\n                    reject(0)\n                })\n            }\n        }).then(code => {\n            // 登录操作\n            commonService.uerLogin({\n                code\n            }).then(res => {\n                // 用户已注册\n                let data = res.data\n                if (res.code === 10000) {\n                    app.globalData.token = data.token\n                    app.globalData.uid = data.uid\n                    let status = data.status\n                    let pathUrl = ''\n                    localstorage.setItem('token', app.globalData.token)\n                    this.isNotRegist = false\n                    app.globalData.isNotRegist = false\n                    if (!token) this.init()\n                    this.goDesnation(status)\n                    // 判断资料填写进行判断\n                } else if (res.code === 99999) {\n                    app.globalData.openid = data.openid\n                    localstorage.setItem('openid', app.globalData.openid)\n                    localstorage.removeItem('token')\n                    app.globalData.isNotRegist = true\n                    this.isNotRegist = true\n                    // if (path === 'pages/index/index' && otherId) {\n                    // \tuni.navigateTo({\n                    // \t\turl: '/pages/index/begin?type=regist'\n                    // \t})\n                    // }\n                    uni.$emit('update', {\n                        msg: '页面注册'\n                    })\n                }\n            }).catch(err => {\n                // 登录失败\n                uni.showToast({\n                    title: '消息存在错误',\n                    icon: 'none'\n                })\n            })\n        })\n    },\n    onShow(query) {\n        // commonService.getUserinfo().then(res => {\n        // \tconsole.log(res)\n        // })\n        this.updateApp()\n        let app = this.$options\n        if (query.path === 'pages/index/begin') {\n            if (app.globalData.isNotRegist) {\n                console.log('触发页面更新')\n                uni.$emit('update', {\n                    msg: '页面注册'\n                })\n            } else {\n                this.goDesnation()\n            }\n        }\n    },\n    onHide() {\n        // console.log('App Hide')\n    },\n    methods: {\n        init() {\n            // this.updateApp()\n            // 获取年收入\n            this.getModel('selfPays', 'getRevenueList')\n            // 获取邀约项目\n            this.getModel('selfTypes', 'getTypeList')\n            uni.$on('getUserInfo', (data) => {\n                this.getUserInfo()\n            })\n            // 获取经纬度\n            this.sendLocation()\n        },\n        updateApp() {\n            const updateManager = wx.getUpdateManager()\n            updateManager.onCheckForUpdate(function(res) {\n                // 请求完新版本信息的回调\n                console.log('Res:', res)\n                // console.log(res.hasUpdate)\n            })\n            updateManager.onUpdateReady(function() {\n                wx.showModal({\n                    title: '更新提示',\n                    content: '新版本已经准备好，是否重启应用？',\n                    success(res) {\n                        if (res.confirm) {\n                            updateManager.applyUpdate()\n                        }\n                    }\n                })\n            })\n        },\n        getPlayList() {\n            let app = this.$options\n            return new Promise((resolve, reject) => {\n                infoService.vipList().then(res => {\n                    if (res.code === 10000) {\n                        let vipItem = res.data && res.data.length && res.data\n                        vipItem.map((v, i) => {\n                            v.text = `每天送${v.key_num}钥匙`\n                            if (v.id === 2) v.isTj = true\n                            if (v.id === 4 || v.title.toLowerCase() === '砖石vip' || v.price === 998) v.lititle = 'Ta们会主动认识你'\n                            if (v.price === 0) this.vipItem.splice(i, 1)\n                        })\n                        app.globalData.vipItem = vipItem\n                        resolve(res.data)\n                    } else reject(0)\n                })\n            })\n        },\n        goDesnation(statusInit) {\n            // 跳转目的地\n            let pathUrl = '/pages/index/index'\n            let joinUrl = '/pages/message/join?from=index'\n            this.getUserInfo(true).then(res => {\n                let {\n                    height,\n                    birthday,\n                    objective,\n                    occupation,\n                    revenue,\n                    gender,\n                    status\n                } = res\n                if (!height || !birthday) pathUrl = '/pages/regist/stepuser'\n                else if (!objective || !revenue) pathUrl = '/pages/regist/stepinfo'\n                else if (gender === 1 && (statusInit === 0 || status === 0)) pathUrl = joinUrl\n                else pathUrl = '/pages/index/index'\n                uni.reLaunch({\n                    url: pathUrl\n                })\n            }).catch(err => {\n                uni.reLaunch({\n                    url: pathUrl\n                })\n            })\n        },\n        getUserInfo(refrensh) {\n            let app = this.$options\n            if (this.isloading && !refrensh) return new Promise()\n            this.isloading = true\n            return new Promise((resolve, reject) => {\n                infoService.getUserInfo({\n                    member_id: 0\n                }).then(res => {\n                    this.isloading = false\n                    if (res.code === 10000) {\n                        let userInfo = Object.assign(res.data)\n                        if (userInfo && userInfo.yxTk && userInfo.yxID) {\n                            console.log('当前用户已经登陆可以尝试登陆云信')\n                            wx.NIMFUN = NIM.socket(this, userInfo.yxTk, userInfo.yxID)\n                        } else {\n                            console.log('当前用户未登陆云信')\n                            wx.NIMFUN = null\n                        }\n                        app.globalData.userInfo = userInfo\n                        resolve(userInfo)\n                    } else reject(0)\n                }).catch(err => {\n                    this.isloading = false\n                    reject(0)\n                })\n            })\n        },\n        saveData(userInfo) {\n            let app = this.$options\n            let headImg_set = userInfo && userInfo.verfiy_list && userInfo.verfiy_list.filter(v => v.type === 'header')\n            let wechat = userInfo.verfiy_list && userInfo.verfiy_list.filter(v => v.type === 'wechat')\n            let nickname = userInfo.verfiy_list && userInfo.verfiy_list.filter(v => v.type === 'nickname')\n            return new Promise((resolve, reject) => {\n                let param = {\n                    birthday: userInfo.timeChoose && userInfo.timeChoose.join('-') || userInfo.birthday || '',\n                    height: userInfo.height,\n                    revenue: userInfo.revenue,\n                    objective: userInfo.objective,\n                    occupation: userInfo.occupation,\n                    header_url: userInfo.header_url,\n                    wechat_number: userInfo.wechat_number,\n                    nickname: userInfo.nickname\n                }\n                if (headImg_set.length && headImg_set[0].pass === 0) delete param.header_url\n                if (wechat.length && wechat[0].pass === 0 || !userInfo.wechat_number) delete param.wechat_number\n                if (nickname.length && nickname[0].pass === 0) delete param.nickname\n                if (param.header_url.length) app.globalData.isUpdateHeadUrl = true\n                util.showLoading('数据保存中，请稍等..')\n                infoService.saveData(param).then(res => {\n                    util.hideLoading()\n                    if (res.code === 10000) {\n                        util.showSuccess('保存成功!')\n                        resolve(1)\n                    } else {\n                        util.showFail('保存失败, ' + res.msg + '请重试!')\n                        reject(0)\n                    }\n                })\n            })\n        },\n        sendShareMessAge() {\n            let app = this.$options\n            console.log('调用发送方法', app.globalData.shareFrom.type, app.globalData.shareFrom.id)\n            let param = {\n                channel_type: app.globalData.shareFrom.type,\n                channel_name: app.globalData.shareFrom.id\n            }\n            if (param.channel_type && param.channel_name && app.globalData.token) commonService.sendShareFrom(param)\n        },\n        sendFormId(formid) {\n            let app = this.$options\n            if (formid && app.globalData.token) commonService.sendFormId({\n                form_id: formid\n            })\n        },\n        sendLocation() {\n            let t\n            let that = this\n            let app = this.$options\n            let sendlocFunc = function(func, time) {\n                func && func()\n                clearInterval(t)\n                t = setInterval(() => {\n                    func && func()\n                }, time)\n            }\n\n            let setLocation = function() {\n                if (!app.globalData.token) return\n                that.getLocationInfo(true).then(res => {\n                    // 发送地理位置信息\n                    let param = {\n                        latitude: res.latitude,\n                        longitude: res.longitude,\n                        opt_system: wx.IS_IOS ? 1 : 2,\n                        platform: 1,\n                        app_name: '51yue'\n                    }\n                    infoService.heartbeat(param)\n                })\n            }\n            sendlocFunc(setLocation, 60 * 60 * 1000)\n        },\n        getLocationInfo(refrensh = false) {\n            let app = this.$options\n            let locationInfo = app.globalData.locationInfo\n            let that = this\n            return new Promise((resove, reject) => {\n                //如果已经获取了,并且不刷新\n                if (locationInfo && !refrensh) {\n                    resove(locationInfo)\n                } else {\n                    wx.getLocation({\n                        type: 'gcj02',\n                        success: function(res) {\n                            let {\n                                latitude,\n                                longitude\n                            } = res;\n                            let locationInfo = {\n                                latitude,\n                                longitude,\n                            }\n                            app.globalData.locationInfo = locationInfo;\n                            resove(locationInfo)\n                        },\n                        fail: function(res) {\n                            let title = '定位失败'\n                            let content = '需要定位信息才能获取周边动态，是否重新定位'\n                            let isagin = true\n                            if (!!~res.errMsg.indexOf('fail auth deny')) {\n                                title = '位置信息未授权'\n                                content = '需要用户授权:设置界面（「右上角」 - 「关于」 - 「右上角」 - 「设置」）打开位置授权！'\n                                isagin = false\n                            }\n                            wx.showModal({\n                                title: title,\n                                content: content,\n                                showCancel: true,\n                                success: function(res) {\n                                    if (res.confirm && isagin) {\n                                        that.getLocationInfo()\n                                    }\n                                },\n                                fail: function(res) {},\n                                complete: function(res) {},\n                            })\n                        },\n                        complete: function(res) {},\n                    })\n                }\n            })\n        },\n        getModel(type, getUrl) {\n            let dataInit = localstorage.getItem(type)\n            let app = this.$options\n            if (dataInit.length) {\n                try {\n                    app.globalData[type] = dataInit && JSON.parse(dataInit)\n                } catch (e) {\n                    app.globalData[type] = []\n                }\n            } else {\n                infoService[getUrl]().then(res => {\n                    if (res.code === 10000) {\n                        let data = res.data\n                        data.map(v => {\n                            v.value = v.id * 1\n                            if (v.title) v.text = v.title\n                            if (v.content) v.text = v.content\n                        })\n                        app.globalData[type] = data\n                        localstorage.setItem(type, data)\n                    }\n                })\n            }\n        }\n    }\n});\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1569743687641\n      var cssReload = require(\"D:/project/qc_study/sy_project/sy-mini/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\project\\\\qc_study\\\\sy_project\\\\sy-mini\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('58fbc0db', component.options)\n    } else {\n      api.reload('58fbc0db', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"src/store/index.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","\nimport store from './index.js'\nexport default store\n"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///./src/App.vue","webpack:///./src/App.vue?95d3","webpack:///./src/App.vue?0087","webpack:///./src/App.vue?ca35","webpack:///./src/App.vue?51b6","webpack:///./src/store/index.vue?3a6e","webpack:///./src/store/index.vue?2dbe","webpack:///./src/store/index.vue"],"names":["store"],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACsE;AACL;AACF;;;AAG/D;AAC0G;AAC1G,gBAAgB,6HAAU;AAC1B,EAAE,wFAAM;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAYf;AACD;AACe,gF;;;;;;;;;;;AClCf;AAAA;AAAA,wCAAkW,CAAgB,kaAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;ACCtX;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACsB;AACyB;AACN;AACC;AACe;AACH;AACtD;AACe,0GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAQ,6DAAI;AACZ,oBAAoB,oEAAY;AAChC;AACA;AACA;AACA;AACA;AACA,QAAQ,6DAAI;AACZ;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA,YAAY,yDAAa;AACzB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oEAAY;AAChC;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oBAAoB,oEAAY;AAChC,oBAAoB,oEAAY;AAChC;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,gBAAgB,qDAAW;AAC3B;AACA;AACA;AACA,2CAA2C,UAAU;AACrD;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gBAAgB,qDAAW;AAC3B;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,wCAAwC,0EAAG;AAC3C,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAI;AACpB,gBAAgB,qDAAW;AAC3B,oBAAoB,6DAAI;AACxB;AACA,wBAAwB,6DAAI;AAC5B;AACA,qBAAqB;AACrB,wBAAwB,6DAAI;AAC5B;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,yDAAa;AAC/F,SAAS;AACT;AACA;AACA,gDAAgD,yDAAa;AAC7D;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qDAAW;AAC/B,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,sDAAsD;AACtD,0DAA0D;AAC1D,6BAA6B;AAC7B,yBAAyB;AACzB,kDAAkD;AAClD,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA,2BAA2B,oEAAY;AACvC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,gBAAgB,qDAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wBAAwB,oEAAY;AACpC;AACA,iBAAiB;AACjB;AACA;AACA;AACA,CAAC,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACrcH;AAAA;AAAA;AAAA;AAAstB,CAAgB,6vBAAG,EAAC,C;;;;;;;;;;ACA1uB;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AACyD;AACL;;;AAGpD;AAC6G;AAC7G,gBAAgB,6HAAU;AAC1B,EAAE,2EAAM;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAYf;AACD;AACe,gF;;;;;;;;;;;ACjCf;AAAA;AAAA;AAAA;AAA4iB,CAAgB,glBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACChkB;;;;eACeA,c","file":"common/main.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=text%2Fjavascript&\"\nexport * from \"./App.vue?vue&type=script&lang=text%2Fjavascript&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\mengzhiwu\\\\social_miniapp\\\\node_modules\\\\_vue-hot-reload-api@2.3.3@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7ba5bd90')) {\n      api.createRecord('7ba5bd90', component.options)\n    } else {\n      api.reload('7ba5bd90', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"src/App.vue\"\nexport default component.exports","import mod from \"-!../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/script.js!../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=text%2Fjavascript&\"; export default mod; export * from \"-!../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/script.js!../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=text%2Fjavascript&\"","\n// 提交正式版改一下\nwx.instantmessaging = {\n    thishe: 'formaldress',\n    // thishe: 'testclothes',\n    development: { // 开发版\n        service: { // 客服\n            id: 5,\n            token: \"ff256c222cd6a694451b54ead0b8b786\",\n            accid: \"service\",\n            title: '客服'\n        },\n        notice: { // 系统通知\n            id: 4,\n            token: \"d3d2ad74886589bcc0a13f7c98395c73\",\n            accid: \"notice\",\n            title: '系统通知'\n        },\n        appkey: '17e9bc15eeb6172f08f4e25e98194410',\n        appsecret: 'db7bf038fc1f'\n    },\n    testclothes: { // 测试服\n        service: { // 客服\n            id: 5,\n            token: \"0063951a9f7198f2f56f0953cf2fed29\",\n            accid: \"service\",\n            title: '客服'\n        },\n        notice: { // 系统通知\n            id: 4,\n            token: \"d6a3732df8b10f92a2acdbc64fbf121e\",\n            accid: \"notice\",\n            title: '系统通知'\n        },\n        appkey: '94f19e934b338488e5d914dba6bbf96e',\n        appsecret: 'a3fd98731796'\n    },\n    formaldress: { // 正式服\n        service: { // 客服\n            id: 5,\n            token: \"88ed201f39f433d810d66e70cdaa6be3\",\n            accid: \"service\",\n            title: '客服'\n        },\n        notice: { // 系统通知\n            id: 4,\n            token: \"de13d3df35a14da302df3f6c47513158\",\n            accid: \"notice\",\n            title: '系统通知'\n        },\n        appkey: 'f1f40794fc391d650373015a6d8f5683',\n        appsecret: '503c2403f0f9'\n    }\n}\n// 兼容旧版本的历史点击\nlet declaration = wx.getStorageSync('declaration')\nif (!declaration || typeof declaration != 'object') {\n    wx.setStorageSync('declaration', {})\n}\n//\t全局声明周期\nimport Vue from 'vue';\nimport commonService from './api/common/common'\nimport infoService from './api/info/info'\nimport util from './static/utils/index.js'\nimport localstorage from './static/utils/localstorage.js'\nimport NIM from '@/static/utils/message/chatconfig.js'\nlet tempid = ''\nexport default Vue.extend({\n    mpType: 'app',\n    globalData: {\n        vipIcon: ['../../static/images/vip-icon-by.png', '../../static/images/vip-icon-bj.png', '../../static/images/vip-icon-hj.png', '../../static/images/vip-icon-zs.png'],\n        code: '',\n        openid: '',\n        token: '',\n        sex: '',\n        pagesition: true, // 逛一逛页面andriod\n        searchIndexResult: false, // 根据刷选条件，查询首页是否存在数据\n        Iitemimg: 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_boy.png',\n        Iitemimgw: 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/images/default/def_avatar_girl.png',\n        vipItem: [],\n        isUpdateHeadUrl: '',\n        isBrush: false,\n        bannerList: [],\n        shareFrom: {\n            type: '',\n            id: ''\n        },\n        locationInfo: {\n            latitude: '',\n            longitude: '',\n        },\n        isNotRegist: true,\n        otherId: '',\n        yYtype: {\n            '吃饭': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-dinner.png',\n            '运动': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-activity.png',\n            '喝一杯': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-drank.png',\n            '恋爱': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-friend.png',\n            '玩游戏': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-game.png',\n            '看电影': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-movie.png',\n            '唱歌': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-song.png',\n            '旅游': 'https://mzw-sns.oss-cn-beijing.aliyuncs.com/sfximao/yt-trave.png'\n        }\n    },\n    data: {\n        isloading: false,\n        isNotRegist: true\n    },\n    onLaunch(param) {\n        let app = this.$options\n        let path = param.path\n        let otherId = param.query.otherId\n        app.globalData.otherId = otherId || ''\n        util.attachInfo(true)\n        let token = localstorage.getItem('token')\n        if (token) {\n            app.globalData.token = token\n            app.globalData.isNotRegist = false\n            this.init()\n        }\n        util.getCode().then(code => {\n            if (code) {\n                app.globalData.code = code\n                return new Promise((resove, reject) => {\n                    resove(code)\n                    console.log(code)\n                })\n            } else {\n                uni.showToast({\n                    title: '用户登录失败，请重新获取登录！',\n                    icon: 'none'\n                })\n                return new Promise((resove, reject) => {\n                    reject(0)\n                })\n            }\n        }).then(code => {\n            // 登录操作\n            commonService.uerLogin({\n                code\n            }).then(res => {\n                // 用户已注册\n                let data = res.data\n                if (res.code === 10000) {\n                    app.globalData.token = data.token\n                    app.globalData.uid = data.uid\n                    let status = data.status\n                    let pathUrl = ''\n                    localstorage.setItem('token', app.globalData.token)\n                    this.isNotRegist = false\n                    app.globalData.isNotRegist = false\n                    if (!token) this.init()\n                    this.goDesnation(status)\n                    // 判断资料填写进行判断\n                } else if (res.code === 99999) {\n                    app.globalData.openid = data.openid\n                    localstorage.setItem('openid', app.globalData.openid)\n                    localstorage.removeItem('token')\n                    app.globalData.isNotRegist = true\n                    this.isNotRegist = true\n                    // if (path === 'pages/index/index' && otherId) {\n                    // \tuni.navigateTo({\n                    // \t\turl: '/pages/index/begin?type=regist'\n                    // \t})\n                    // }\n                    uni.$emit('update', {\n                        msg: '页面注册'\n                    })\n                }\n            }).catch(err => {\n                // 登录失败\n                uni.showToast({\n                    title: '消息存在错误',\n                    icon: 'none'\n                })\n            })\n        })\n    },\n    onShow(query) {\n        // commonService.getUserinfo().then(res => {\n        // \tconsole.log(res)\n        // })\n        this.updateApp()\n        let app = this.$options\n        if (query.path === 'pages/index/begin') {\n            if (app.globalData.isNotRegist) {\n                console.log('触发页面更新')\n                uni.$emit('update', {\n                    msg: '页面注册'\n                })\n            } else {\n                this.goDesnation()\n            }\n        }\n    },\n    onHide() {\n        // console.log('App Hide')\n    },\n    methods: {\n        init() {\n            // this.updateApp()\n            // 获取年收入\n            this.getModel('selfPays', 'getRevenueList')\n            // 获取邀约项目\n            this.getModel('selfTypes', 'getTypeList')\n            uni.$on('getUserInfo', (data) => {\n                this.getUserInfo()\n            })\n            // 获取经纬度\n            this.sendLocation()\n        },\n        updateApp() {\n            const updateManager = wx.getUpdateManager()\n            updateManager.onCheckForUpdate(function(res) {\n                // 请求完新版本信息的回调\n                console.log('Res:', res)\n                // console.log(res.hasUpdate)\n            })\n            updateManager.onUpdateReady(function() {\n                wx.showModal({\n                    title: '更新提示',\n                    content: '新版本已经准备好，是否重启应用？',\n                    success(res) {\n                        if (res.confirm) {\n                            updateManager.applyUpdate()\n                        }\n                    }\n                })\n            })\n        },\n        getPlayList() {\n            let app = this.$options\n            return new Promise((resolve, reject) => {\n                infoService.vipList().then(res => {\n                    if (res.code === 10000) {\n                        let vipItem = res.data && res.data.length && res.data\n                        vipItem.map((v, i) => {\n                            v.text = `每天送${v.key_num}钥匙`\n                            if (v.id === 2) v.isTj = true\n                            if (v.id === 4 || v.title.toLowerCase() === '砖石vip' || v.price === 998) v.lititle = 'Ta们会主动认识你'\n                            if (v.price === 0) this.vipItem.splice(i, 1)\n                        })\n                        app.globalData.vipItem = vipItem\n                        resolve(res.data)\n                    } else reject(0)\n                })\n            })\n        },\n        goDesnation(statusInit) {\n            // 跳转目的地\n            let pathUrl = '/pages/index/index'\n            let joinUrl = '/pages/message/join?from=index'\n            this.getUserInfo(true).then(res => {\n                let {\n                    height,\n                    birthday,\n                    objective,\n                    occupation,\n                    revenue,\n                    gender,\n                    status\n                } = res\n                if (!height || !birthday) pathUrl = '/pages/regist/stepuser'\n                else if (!objective || !revenue) pathUrl = '/pages/regist/stepinfo'\n                else if (gender === 1 && (statusInit === 0 || status === 0)) pathUrl = joinUrl\n                else pathUrl = '/pages/index/index'\n                uni.reLaunch({\n                    url: pathUrl\n                })\n            }).catch(err => {\n                uni.reLaunch({\n                    url: pathUrl\n                })\n            })\n        },\n        getUserInfo(refrensh) {\n            let app = this.$options\n            if (this.isloading && !refrensh) return new Promise()\n            this.isloading = true\n            return new Promise((resolve, reject) => {\n                infoService.getUserInfo({\n                    member_id: 0\n                }).then(res => {\n                    this.isloading = false\n                    if (res.code === 10000) {\n                        let userInfo = Object.assign(res.data)\n                        if (userInfo && userInfo.yxTk && userInfo.yxID) {\n                            console.log('当前用户已经登陆可以尝试登陆云信')\n                            wx.NIMFUN = NIM.socket(this, userInfo.yxTk, userInfo.yxID)\n                        } else {\n                            console.log('当前用户未登陆云信')\n                            wx.NIMFUN = null\n                        }\n                        app.globalData.userInfo = userInfo\n                        resolve(userInfo)\n                    } else reject(0)\n                }).catch(err => {\n                    this.isloading = false\n                    reject(0)\n                })\n            })\n        },\n        saveData(userInfo) {\n            let app = this.$options\n            let headImg_set = userInfo && userInfo.verfiy_list && userInfo.verfiy_list.filter(v => v.type === 'header')\n            let wechat = userInfo.verfiy_list && userInfo.verfiy_list.filter(v => v.type === 'wechat')\n            let nickname = userInfo.verfiy_list && userInfo.verfiy_list.filter(v => v.type === 'nickname')\n            return new Promise((resolve, reject) => {\n                let param = {\n                    birthday: userInfo.timeChoose && userInfo.timeChoose.join('-') || userInfo.birthday || '',\n                    height: userInfo.height,\n                    revenue: userInfo.revenue,\n                    objective: userInfo.objective,\n                    occupation: userInfo.occupation,\n                    header_url: userInfo.header_url,\n                    wechat_number: userInfo.wechat_number,\n                    nickname: userInfo.nickname\n                }\n                if (headImg_set.length && headImg_set[0].pass === 0) delete param.header_url\n                if (wechat.length && wechat[0].pass === 0 || !userInfo.wechat_number) delete param.wechat_number\n                if (nickname.length && nickname[0].pass === 0) delete param.nickname\n                if (param.header_url.length) app.globalData.isUpdateHeadUrl = true\n                util.showLoading('数据保存中，请稍等..')\n                infoService.saveData(param).then(res => {\n                    util.hideLoading()\n                    if (res.code === 10000) {\n                        util.showSuccess('保存成功!')\n                        resolve(1)\n                    } else {\n                        util.showFail('保存失败, ' + res.msg + '请重试!')\n                        reject(0)\n                    }\n                })\n            })\n        },\n        sendShareMessAge() {\n            let app = this.$options\n            console.log('调用发送方法', app.globalData.shareFrom.type, app.globalData.shareFrom.id)\n            let param = {\n                channel_type: app.globalData.shareFrom.type,\n                channel_name: app.globalData.shareFrom.id\n            }\n            if (param.channel_type && param.channel_name && app.globalData.token) commonService.sendShareFrom(param)\n        },\n        sendFormId(formid) {\n            let app = this.$options\n            if (formid && app.globalData.token) commonService.sendFormId({\n                form_id: formid\n            })\n        },\n        sendLocation() {\n            let t\n            let that = this\n            let app = this.$options\n            let sendlocFunc = function(func, time) {\n                func && func()\n                clearInterval(t)\n                t = setInterval(() => {\n                    func && func()\n                }, time)\n            }\n\n            let setLocation = function() {\n                if (!app.globalData.token) return\n                that.getLocationInfo(true).then(res => {\n                    // 发送地理位置信息\n                    let param = {\n                        latitude: res.latitude,\n                        longitude: res.longitude,\n                        opt_system: wx.IS_IOS ? 1 : 2,\n                        platform: 1,\n                        app_name: '51yue'\n                    }\n                    infoService.heartbeat(param)\n                })\n            }\n            sendlocFunc(setLocation, 60 * 60 * 1000)\n        },\n        getLocationInfo(refrensh = false) {\n            let app = this.$options\n            let locationInfo = app.globalData.locationInfo\n            let that = this\n            return new Promise((resove, reject) => {\n                //如果已经获取了,并且不刷新\n                if (locationInfo && !refrensh) {\n                    resove(locationInfo)\n                } else {\n                    wx.getLocation({\n                        type: 'gcj02',\n                        success: function(res) {\n                            let {\n                                latitude,\n                                longitude\n                            } = res;\n                            let locationInfo = {\n                                latitude,\n                                longitude,\n                            }\n                            app.globalData.locationInfo = locationInfo;\n                            resove(locationInfo)\n                        },\n                        fail: function(res) {\n                            let title = '定位失败'\n                            let content = '需要定位信息才能获取周边动态，是否重新定位'\n                            let isagin = true\n                            if (!!~res.errMsg.indexOf('fail auth deny')) {\n                                title = '位置信息未授权'\n                                content = '需要用户授权:设置界面（「右上角」 - 「关于」 - 「右上角」 - 「设置」）打开位置授权！'\n                                isagin = false\n                            }\n                            wx.showModal({\n                                title: title,\n                                content: content,\n                                showCancel: true,\n                                success: function(res) {\n                                    if (res.confirm && isagin) {\n                                        that.getLocationInfo()\n                                    }\n                                },\n                                fail: function(res) {},\n                                complete: function(res) {},\n                            })\n                        },\n                        complete: function(res) {},\n                    })\n                }\n            })\n        },\n        getModel(type, getUrl) {\n            let dataInit = localstorage.getItem(type)\n            let app = this.$options\n            if (dataInit.length) {\n                try {\n                    app.globalData[type] = dataInit && JSON.parse(dataInit)\n                } catch (e) {\n                    app.globalData[type] = []\n                }\n            } else {\n                infoService[getUrl]().then(res => {\n                    if (res.code === 10000) {\n                        let data = res.data\n                        data.map(v => {\n                            v.value = v.id * 1\n                            if (v.title) v.text = v.title\n                            if (v.content) v.text = v.content\n                        })\n                        app.globalData[type] = data\n                        localstorage.setItem(type, data)\n                    }\n                })\n            }\n        }\n    }\n});\n","import mod from \"-!../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/_@dcloudio_vue-cli-plugin-uni@0.9.517@@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-2!../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/_@dcloudio_vue-cli-plugin-uni@0.9.517@@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-2!../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1569721825297\n      var cssReload = require(\"D:/mengzhiwu/social_miniapp/node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\mengzhiwu\\\\social_miniapp\\\\node_modules\\\\_vue-hot-reload-api@2.3.3@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('58fbc0db')) {\n      api.createRecord('58fbc0db', component.options)\n    } else {\n      api.reload('58fbc0db', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"src/store/index.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_@dcloudio_vue-cli-plugin-uni@0.9.517@@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!../../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_@dcloudio_vue-cli-plugin-uni@0.9.517@@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!../../node_modules/_@dcloudio_webpack-uni-mp-loader@0.3.640@@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","\nimport store from './index.js'\nexport default store\n"],"sourceRoot":""}
>>>>>>> 1b4001104db3cfa8157de70ea9df53beda198198
